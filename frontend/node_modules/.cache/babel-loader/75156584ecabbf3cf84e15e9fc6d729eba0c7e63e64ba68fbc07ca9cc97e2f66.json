{"ast":null,"code":"import \"core-js/modules/esnext.iterator.map.js\";\nimport JsBarcode from 'jsbarcode';\nimport { onMounted, watch, ref } from 'vue';\nexport default {\n  props: {\n    sku: {\n      type: String,\n      default: '' // must be no value\n    }\n  },\n  setup(props) {\n    const svgRef = ref(null);\n    const errorMessage = ref(''); // catch store error dynamic message\n    const fallbackSku = '0000000000000'; // defaul SKU for fallback barcode\n\n    const calculateEAN13Checksum = sku => {\n      const digits = sku.split('').map(Number);\n      let sum = 0;\n      for (let i = 0; i < 12; i++) {\n        sum += i % 2 === 0 ? digits[i] : digits[i] * 3;\n      }\n      const checksum = (10 - sum % 10) % 10;\n      return checksum;\n    };\n    const generateBarcode = sku => {\n      // Check if SKU exists and is a string with a length property\n      if (!sku || typeof sku !== 'string') {\n        console.error('Invalid SKU:', sku);\n        errorMessage.value = 'Invalid SKU';\n        // Generate a fallback barcode if SKU is invalid\n        JsBarcode(svgRef.value, fallbackSku, {\n          format: 'CODE128',\n          // Alternative barcode format\n          lineColor: '#000',\n          width: 2,\n          height: 50,\n          displayValue: true\n        });\n        return;\n      }\n\n      // exactly 13 characters for EAN-13 format\n      if (sku.length < 13) {\n        sku = sku.padStart(13, '0');\n      } else if (sku.length > 13) {\n        sku = sku.slice(0, 13); // delete the addition input if longer than 13\n      }\n\n      // check if 13 digits\n      if (sku.length !== 13 || !/^\\d{13}$/.test(sku)) {\n        console.error('Invalid SKU format:', sku);\n        errorMessage.value = 'Invalid SKU format: must be numeric and 13 digits.';\n        // generate a fallback error message\n        JsBarcode(svgRef.value, fallbackSku, {\n          format: 'CODE128',\n          lineColor: '#000',\n          width: 2,\n          height: 50,\n          displayValue: true\n        });\n        return;\n      }\n\n      // calculate the checksum and append it to the SKU if necessary\n      const checksum = calculateEAN13Checksum(sku);\n      sku = sku.slice(0, 12) + checksum; // apend checksum to the first 12 digits\n\n      // clear error message if valid SKU is detected\n      errorMessage.value = '';\n\n      // Generate the barcode using JsBarcode library\n      JsBarcode(svgRef.value, sku, {\n        format: 'EAN13',\n        lineColor: '#000',\n        width: 2,\n        height: 50,\n        displayValue: true\n      });\n    };\n\n    // Generate barcode on component mount\n    onMounted(() => generateBarcode(props.sku));\n\n    // watch for SKU changes\n    watch(() => props.sku, newSku => {\n      generateBarcode(newSku);\n    });\n    return {\n      // barcode in svg format\n      svgRef,\n      // dynamic err\n      errorMessage\n    };\n  }\n};","map":{"version":3,"names":["JsBarcode","onMounted","watch","ref","props","sku","type","String","default","setup","svgRef","errorMessage","fallbackSku","calculateEAN13Checksum","digits","split","map","Number","sum","i","checksum","generateBarcode","console","error","value","format","lineColor","width","height","displayValue","length","padStart","slice","test","newSku"],"sources":["C:\\Users\\Administrator\\OneDrive\\Desktop\\POSExpress\\frontend\\src\\components\\Admin\\Inventory\\Barcode.vue"],"sourcesContent":["<script>\r\nimport JsBarcode from 'jsbarcode';\r\nimport { onMounted, watch, ref } from 'vue';\r\n\r\nexport default {\r\n  props: {\r\n    sku: {\r\n      type: String,\r\n      default: '' // must be no value\r\n    }\r\n  },\r\n  setup(props) {\r\n    const svgRef = ref(null);\r\n    const errorMessage = ref(''); // catch store error dynamic message\r\n    const fallbackSku = '0000000000000'; // defaul SKU for fallback barcode\r\n\r\n\r\n    const calculateEAN13Checksum = (sku) => {\r\n      const digits = sku.split('').map(Number);\r\n      let sum = 0;\r\n\r\n      for (let i = 0; i < 12; i++) {\r\n        sum += (i % 2 === 0 ? digits[i] : digits[i] * 3);\r\n      }\r\n\r\n\r\n      const checksum = (10 - (sum % 10)) % 10;\r\n      return checksum;\r\n    };\r\n\r\n    const generateBarcode = (sku) => {\r\n      // Check if SKU exists and is a string with a length property\r\n      if (!sku || typeof sku !== 'string') {\r\n        console.error('Invalid SKU:', sku);\r\n        errorMessage.value = 'Invalid SKU';\r\n        // Generate a fallback barcode if SKU is invalid\r\n        JsBarcode(svgRef.value, fallbackSku, {\r\n          format: 'CODE128', // Alternative barcode format\r\n          lineColor: '#000',\r\n          width: 2,\r\n          height: 50,\r\n          displayValue: true\r\n        });\r\n        return;\r\n      }\r\n      \r\n      // exactly 13 characters for EAN-13 format\r\n      if (sku.length < 13) {\r\n        sku = sku.padStart(13, '0'); \r\n      } else if (sku.length > 13) {\r\n        sku = sku.slice(0, 13); // delete the addition input if longer than 13\r\n      }\r\n\r\n      // check if 13 digits\r\n      if (sku.length !== 13 || !/^\\d{13}$/.test(sku)) {\r\n        console.error('Invalid SKU format:', sku);\r\n        errorMessage.value = 'Invalid SKU format: must be numeric and 13 digits.';\r\n        // generate a fallback error message\r\n        JsBarcode(svgRef.value, fallbackSku, {\r\n          format: 'CODE128', \r\n          lineColor: '#000',\r\n          width: 2,\r\n          height: 50,\r\n          displayValue: true\r\n        });\r\n        return;\r\n      }\r\n\r\n      // calculate the checksum and append it to the SKU if necessary\r\n      const checksum = calculateEAN13Checksum(sku);\r\n      sku = sku.slice(0, 12) + checksum; // apend checksum to the first 12 digits\r\n\r\n      // clear error message if valid SKU is detected\r\n      errorMessage.value = '';\r\n\r\n      // Generate the barcode using JsBarcode library\r\n      JsBarcode(svgRef.value, sku, {\r\n        format: 'EAN13',\r\n        lineColor: '#000',\r\n        width: 2,\r\n        height: 50,\r\n        displayValue: true\r\n      });\r\n    };\r\n\r\n    // Generate barcode on component mount\r\n    onMounted(() => generateBarcode(props.sku));\r\n\r\n    // watch for SKU changes\r\n    watch(() => props.sku, (newSku) => {\r\n      generateBarcode(newSku);\r\n    });\r\n\r\n    return {\r\n      // barcode in svg format\r\n      svgRef,\r\n      // dynamic err\r\n      errorMessage\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n\r\n<template>\r\n  <div>\r\n    <div v-if=\"errorMessage\" class=\"error-message\">{{ errorMessage }}</div>\r\n    <svg ref=\"svgRef\"></svg>\r\n  </div>\r\n</template>\r\n\r\n<style scoped>\r\n.error-message {\r\n  color: red;\r\n  font-weight: bold;\r\n  margin-top: 10px;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}