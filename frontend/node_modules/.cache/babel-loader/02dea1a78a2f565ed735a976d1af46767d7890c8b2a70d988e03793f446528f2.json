{"ast":null,"code":"import \"core-js/modules/esnext.iterator.map.js\";\nimport { ref, onMounted, onBeforeUnmount, computed, defineComponent } from 'vue';\nimport { Line } from \"vue-chartjs\";\nimport { Chart as ChartJS, Title, Tooltip, Legend, LineElement, CategoryScale, LinearScale } from \"chart.js\";\nimport 'select2';\nimport feather from 'feather-icons';\nimport 'datatables.net-bs5';\nimport 'datatables.net-bs5/css/dataTables.bootstrap5.min.css';\nimport Navbar from '/src/components/Admin/Navbar.vue';\nimport axios from \"axios\";\n\n// Register chart.js components\nChartJS.register(Title, Tooltip, Legend, LineElement, CategoryScale, LinearScale);\nexport default defineComponent({\n  components: {\n    Navbar,\n    LineChart: Line\n  },\n  setup() {\n    const select = ref('.select');\n    const salesData = ref([]);\n\n    // Computed property for chartData\n    const chartData = computed(() => {\n      if (salesData.value.length === 0) {\n        return {\n          labels: [],\n          datasets: []\n        }; // Return empty chart data if no sales data\n      }\n      const labels = salesData.value.map(data => data._id); // _id is the date or label\n      const totalSales = salesData.value.map(data => data.totalSales);\n      const totalProfit = salesData.value.map(data => data.totalProfit);\n      return {\n        labels,\n        datasets: [{\n          label: \"Total Sales\",\n          data: totalSales,\n          borderColor: \"rgb(75, 192, 192)\",\n          fill: false,\n          tension: 0.1\n        }, {\n          label: \"Total Profit\",\n          data: totalProfit,\n          borderColor: \"rgb(255, 99, 132)\",\n          fill: false,\n          tension: 0.1\n        }]\n      };\n    });\n\n    // Fetch the sales data\n    onMounted(async () => {\n      try {\n        await $(select.value).select2();\n        await feather.replace();\n        await $('.table').DataTable();\n        const response = await axios.get(\"http://localhost:5000/api/get_sales\"); // Ensure the API URL is correct\n        if (response.data.success) {\n          salesData.value = response.data.salesDatas;\n        } else {\n          console.error(\"Failed to fetch sales data\");\n        }\n      } catch (error) {\n        console.error(\"Error fetching sales data:\", error);\n      }\n    });\n    onBeforeUnmount(() => {\n      $(select.value).select2('destroy');\n    });\n    return {\n      select,\n      salesData,\n      chartData // Return computed chartData for binding\n    };\n  }\n});","map":{"version":3,"names":["ref","onMounted","onBeforeUnmount","computed","defineComponent","Line","Chart","ChartJS","Title","Tooltip","Legend","LineElement","CategoryScale","LinearScale","feather","Navbar","axios","register","components","LineChart","setup","select","salesData","chartData","value","length","labels","datasets","map","data","_id","totalSales","totalProfit","label","borderColor","fill","tension","$","select2","replace","DataTable","response","get","success","salesDatas","console","error"],"sources":["C:\\Users\\Administrator\\OneDrive\\Desktop\\POSExpress\\frontend\\src\\components\\Admin\\Main\\Dashboard.vue"],"sourcesContent":["<template>\r\n  <Navbar/>\r\n  <div class=\"page-wrapper\">\r\n    <div class=\"content\">\r\n      <!-- Dashboard Widgets and other sections -->\r\n      \r\n      <div class=\"row\">\r\n\r\n            <div class=\"card-body\">\r\n              <!-- LineChart component to display the sales chart -->\r\n              <LineChart :chartData=\"chartData\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        <!-- Other content like Recent Products, Expired Products, etc. -->\r\n      </div>\r\n  \r\n</template>\r\n\r\n<script>\r\nimport { ref, onMounted, onBeforeUnmount, computed, defineComponent } from 'vue';\r\nimport { Line } from \"vue-chartjs\";\r\nimport { Chart as ChartJS, Title, Tooltip, Legend, LineElement, CategoryScale, LinearScale } from \"chart.js\";\r\nimport 'select2';\r\nimport feather from 'feather-icons';\r\nimport 'datatables.net-bs5';\r\nimport 'datatables.net-bs5/css/dataTables.bootstrap5.min.css';\r\nimport Navbar from '/src/components/Admin/Navbar.vue';\r\nimport axios from \"axios\";\r\n\r\n// Register chart.js components\r\nChartJS.register(Title, Tooltip, Legend, LineElement, CategoryScale, LinearScale);\r\n\r\nexport default defineComponent({\r\n  components: {\r\n    Navbar,\r\n    LineChart: Line,\r\n  },\r\n  setup() {\r\n    const select = ref('.select');\r\n    const salesData = ref([]);\r\n\r\n    // Computed property for chartData\r\n    const chartData = computed(() => {\r\n      if (salesData.value.length === 0) {\r\n        return { labels: [], datasets: [] }; // Return empty chart data if no sales data\r\n      }\r\n\r\n      const labels = salesData.value.map((data) => data._id); // _id is the date or label\r\n      const totalSales = salesData.value.map((data) => data.totalSales); \r\n      const totalProfit = salesData.value.map((data) => data.totalProfit);\r\n\r\n      return {\r\n        labels,\r\n        datasets: [\r\n          {\r\n            label: \"Total Sales\",\r\n            data: totalSales,\r\n            borderColor: \"rgb(75, 192, 192)\",\r\n            fill: false,\r\n            tension: 0.1,\r\n          },\r\n          {\r\n            label: \"Total Profit\",\r\n            data: totalProfit,\r\n            borderColor: \"rgb(255, 99, 132)\",\r\n            fill: false,\r\n            tension: 0.1,\r\n          },\r\n        ],\r\n      };\r\n    });\r\n\r\n    // Fetch the sales data\r\n    onMounted(async () => {\r\n      try {\r\n        await $(select.value).select2();\r\n        await feather.replace();\r\n        await $('.table').DataTable();\r\n\r\n        const response = await axios.get(\"http://localhost:5000/api/get_sales\"); // Ensure the API URL is correct\r\n        if (response.data.success) {\r\n          salesData.value = response.data.salesDatas;\r\n        } else {\r\n          console.error(\"Failed to fetch sales data\");\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error fetching sales data:\", error);\r\n      }\r\n    });\r\n\r\n    onBeforeUnmount(() => {\r\n      $(select.value).select2('destroy');\r\n    });\r\n\r\n    return {\r\n      select,\r\n      salesData,\r\n      chartData, // Return computed chartData for binding\r\n    };\r\n  },\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n/* Optional styling for your page or components */\r\n#salesChart {\r\n  max-width: 800px;\r\n  margin: 0 auto;\r\n  height: 400px;\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}