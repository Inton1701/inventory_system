{"ast":null,"code":"import { ref, onMounted, onBeforeUnmount, nextTick } from 'vue';\nimport 'select2';\nimport feather from 'feather-icons';\nimport ClipLoader from 'vue-spinner/src/ClipLoader.vue';\nimport Swal from 'sweetalert2';\nimport Navbar from '/src/components/Admin/Navbar.vue';\nexport default {\n  components: {\n    Navbar,\n    ClipLoader\n  },\n  setup() {\n    const apiURL = process.env.VUE_APP_URL;\n    const users = ref([]);\n    const loading = ref(false);\n    const initializeDataTable = () => {\n      const tableElement = $('#user-table');\n\n      // Destroy existing DataTable instance if it exists\n      if ($.fn.DataTable.isDataTable(tableElement)) {\n        tableElement.DataTable().destroy();\n      }\n      // Reinitialize DataTable\n      tableElement.DataTable({\n        searching: true,\n        paging: true,\n        info: true,\n        responsive: true // Optional: Makes table responsive\n      });\n    };\n    const refreshDataTable = () => {\n      const table = $('#user-table').DataTable();\n      table.destroy(); // Destroy the current instance\n      initializeDataTable(); // Reinitialize with updated data\n    };\n    const getUsers = async () => {\n      try {\n        loading.value = true;\n        const response = await axios.get(`${apiURL}/get_all_users`); // Adjust the URL as needed\n        users.value = response.data.users;\n        if (!response.success) {\n          Swal.fire('Error', response.message, 'error');\n          return;\n        }\n        nextTick(() => refreshDataTable());\n      } catch (error) {\n        console.error('Error fetching users:', error.message);\n      } finally {\n        loading.value = false;\n      }\n    };\n    onMounted(async () => {\n      await getUsers();\n    });\n    return {\n      users,\n      loading\n    };\n  }\n};","map":{"version":3,"names":["ref","onMounted","onBeforeUnmount","nextTick","feather","ClipLoader","Swal","Navbar","components","setup","apiURL","process","env","VUE_APP_URL","users","loading","initializeDataTable","tableElement","$","fn","DataTable","isDataTable","destroy","searching","paging","info","responsive","refreshDataTable","table","getUsers","value","response","axios","get","data","success","fire","message","error","console"],"sources":["C:\\Users\\Administrator\\OneDrive\\Desktop\\POSExpress\\frontend\\src\\components\\Admin\\Users\\Staffs.vue"],"sourcesContent":["<template>\r\n    <Navbar/>\r\n    <Sidebar/>\r\n    <div class=\"page-wrapper\">\r\n    <div class=\"content\">\r\n      <div class=\"page-header\">\r\n        <div class=\"add-item d-flex\">\r\n          <div class=\"page-title\">\r\n            <h4>User List</h4>\r\n            <h6>Manage Your Users</h6>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"page-btn\">\r\n          <a\r\n            href=\"#\"\r\n            class=\"btn btn-added\"\r\n            data-bs-toggle=\"modal\"\r\n            data-bs-target=\"#add-users\"><i data-feather=\"plus-circle\" class=\"me-2\"></i>Add New User</a>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"card table-list-card\">\r\n        <div class=\"card-body\">\r\n          <div class=\"table-responsive\">\r\n            <table class=\"table\" id=\"user-table\">\r\n              <thead>\r\n                <tr>\r\n                  <th>User Full Name</th>\r\n                  <th>Phone</th>\r\n                  <th>Email</th>\r\n                  <th>Status</th>\r\n                  <th>Login-Time</th>\r\n                  <th>Logout-Time</th>\r\n                  <th>Role</th>\r\n                  <th>Created On</th>\r\n                  <th class=\"no-sort\">Action</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n  <tr v-if=\"loading\">\r\n    <td colspan=\"9\" class=\"text-center\">\r\n      <ClipLoader color=\"#000\" size=\"50px\" loading=\"true\" />\r\n      Loading users...\r\n    </td>\r\n  </tr>\r\n  <tr v-for=\"user in users\" :key=\"user._id\">\r\n    <td>{{ user.firstName }} {{ user.lastName }}</td>\r\n    <td>{{ user.phone }}</td>\r\n    <td>{{ user.email }}</td>\r\n    <td>{{ user.status }}</td>\r\n    <td>{{ new Date(user.login).toLocaleString() }}</td>\r\n    <td>{{ new Date(user.logout).toLocaleString() }}</td>\r\n    <td>{{ user.role }}</td>\r\n    <td>{{ new Date(user.createdAt).toLocaleString() }}</td>\r\n    <td>\r\n      <button class=\"btn btn-primary btn-sm\">Edit</button>\r\n      <button class=\"btn btn-danger btn-sm\">Delete</button>\r\n    </td>\r\n  </tr>\r\n</tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  \r\n\r\n  <div class=\"modal fade\" id=\"add-users\">\r\n    <div class=\"modal-dialog modal-dialog-centered custom-modal-two\">\r\n      <div class=\"modal-content\">\r\n        <div class=\"page-wrapper-new p-0\">\r\n          <div class=\"content\">\r\n            <div class=\"modal-header border-0 custom-modal-header\">\r\n              <div class=\"page-title\">\r\n                <h4>Add User</h4>\r\n              </div>\r\n              <button\r\n                type=\"button\"\r\n                class=\"close\"\r\n                data-bs-dismiss=\"modal\"\r\n                aria-label=\"Close\">\r\n                <span aria-hidden=\"true\">&times;</span>\r\n              </button>\r\n            </div>\r\n            <div class=\"modal-body custom-modal-body new-employee-field\">\r\n              <form id=\"addUserForm\" enctype=\"multipart/form-data\">\r\n                <div class=\"row\">\r\n                  <div class=\"col-lg-12\">\r\n                    <label class=\"form-label\">User Profile</label>\r\n                    <div class=\"profile-pic-upload mb-3\">\r\n                      <div class=\"profile-pic user-pic\">\r\n                        <span><img src=\"\" alt /></span>\r\n                        <a href=\"javascript:void(0);\" class=\"remove-photo\"><i data-feather=\"x\" class=\"x-square-add\"></i></a>\r\n                      </div>\r\n                      <div class=\"image-upload mb-0\">\r\n                        <input type=\"file\" id=\"add-user-logo\" name=\"user_profile\" />\r\n                        <div class=\"image-uploads\">\r\n                          <h4>Change Image</h4>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"col-lg-6\">\r\n                    <div class=\"input-blocks\">\r\n                      <label>First Name</label>\r\n                      <input type=\"text\" class=\"form-control\" name=\"first_name\" />\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"col-lg-6\">\r\n                    <div class=\"input-blocks\">\r\n                      <label>Last Name</label>\r\n                      <input type=\"text\" class=\"form-control\" name=\"last_name\" />\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"col-lg-6\">\r\n                    <div class=\"input-blocks\">\r\n                      <label>Phone</label>\r\n                      <input type=\"text\" class=\"form-control\" name=\"contact\" />\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"col-lg-6\">\r\n                    <div class=\"input-blocks\">\r\n                      <label>Email</label>\r\n                      <input type=\"email\" class=\"form-control\" name=\"email\" />\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"col-lg-6\">\r\n                    <div class=\"input-blocks\">\r\n                      <label>Birthdate</label>\r\n                      <input type=\"date\" class=\"form-control\" name=\"birthdate\" />\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"col-lg-6\">\r\n                    <div class=\"input-blocks\">\r\n                      <label>Role</label>\r\n                      <select class=\" form-control\" name=\"role\">\r\n                        <option value=\"Admin\">Admin</option>\r\n                        <option value=\"Cashier\" selected>Cashier</option>\r\n                      </select>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"col-lg-6\">\r\n                    <div class=\"input-blocks\">\r\n                      <label>Password</label>\r\n                      <div class=\"pass-group\">\r\n                        <input type=\"password\" id=\"add-password\" class=\"pass-input\" name=\"password\" />\r\n                        <span class=\"fas toggle-password fa-eye-slash\"></span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"col-lg-6\">\r\n                    <div class=\"input-blocks\">\r\n                      <label>Confirm Passworrd</label>\r\n                      <div class=\"pass-group\">\r\n                        <input type=\"password\" id=\"add-conf-password\" class=\"pass-input\" name=\"conf_password\" />\r\n                        <span class=\"fas toggle-password fa-eye-slash\"></span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class=\"modal-footer-btn\">\r\n                  <button\r\n                    type=\"button\"\r\n                    class=\"btn btn-cancel me-2\"\r\n                    data-bs-dismiss=\"modal\">\r\n                    Cancel\r\n                  </button>\r\n                  <button type=\"submit\" class=\"btn btn-submit\">Submit</button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"modal fade\" id=\"edit-users\">\r\n    <div class=\"modal-dialog modal-dialog-centered custom-modal-two\">\r\n      <div class=\"modal-content\">\r\n        <div class=\"page-wrapper-new p-0\">\r\n          <div class=\"content\">\r\n            <div class=\"modal-header border-0 custom-modal-header\">\r\n              <div class=\"page-title\">\r\n                <h4>Add User</h4>\r\n              </div>\r\n              <button\r\n                type=\"button\"\r\n                class=\"close\"\r\n                data-bs-dismiss=\"modal\"\r\n                aria-label=\"Close\">\r\n                <span aria-hidden=\"true\">&times;</span>\r\n              </button>\r\n            </div>\r\n            <div class=\"modal-body custom-modal-body new-employee-field\">\r\n              <form id=\"addUserForm\" enctype=\"multipart/form-data\">\r\n                <div class=\"row\">\r\n                  <div class=\"col-lg-12\">\r\n                    <label class=\"form-label\">User Profile</label>\r\n                    <div class=\"profile-pic-upload mb-3\">\r\n                      <div class=\"profile-pic user-pic\">\r\n                        <span><img src=\"\" alt /></span>\r\n                        <a href=\"javascript:void(0);\" class=\"remove-photo\"><i data-feather=\"x\" class=\"x-square-add\"></i></a>\r\n                      </div>\r\n                      <div class=\"image-upload mb-0\">\r\n                        <input type=\"file\" id=\"add-user-logo\" name=\"user_profile\" />\r\n                        <div class=\"image-uploads\">\r\n                          <h4>Change Image</h4>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"col-lg-6\">\r\n                    <div class=\"input-blocks\">\r\n                      <label>First Name</label>\r\n                      <input type=\"text\" class=\"form-control\" name=\"first_name\" />\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"col-lg-6\">\r\n                    <div class=\"input-blocks\">\r\n                      <label>Last Name</label>\r\n                      <input type=\"text\" class=\"form-control\" name=\"last_name\" />\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"col-lg-6\">\r\n                    <div class=\"input-blocks\">\r\n                      <label>Phone</label>\r\n                      <input type=\"text\" class=\"form-control\" name=\"contact\" />\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"col-lg-6\">\r\n                    <div class=\"input-blocks\">\r\n                      <label>Email</label>\r\n                      <input type=\"email\" class=\"form-control\" name=\"email\" />\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"col-lg-6\">\r\n                    <div class=\"input-blocks\">\r\n                      <label>Birthdate</label>\r\n                      <input type=\"date\" class=\"form-control\" name=\"birthdate\" />\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"col-lg-6\">\r\n                    <div class=\"input-blocks\">\r\n                      <label>Role</label>\r\n                      <select class=\" form-control\" name=\"role\">\r\n                        <option value=\"Admin\">Admin</option>\r\n                        <option value=\"Cashier\" selected>Cashier</option>\r\n                      </select>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"col-lg-6\">\r\n                    <div class=\"input-blocks\">\r\n                      <label>Password</label>\r\n                      <div class=\"pass-group\">\r\n                        <input type=\"password\" id=\"add-password\" class=\"pass-input\" name=\"password\" />\r\n                        <span class=\"fas toggle-password fa-eye-slash\"></span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"col-lg-6\">\r\n                    <div class=\"input-blocks\">\r\n                      <label>Confirm Passworrd</label>\r\n                      <div class=\"pass-group\">\r\n                        <input type=\"password\" id=\"add-conf-password\" class=\"pass-input\" name=\"conf_password\" />\r\n                        <span class=\"fas toggle-password fa-eye-slash\"></span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class=\"modal-footer-btn\">\r\n                  <button\r\n                    type=\"button\"\r\n                    class=\"btn btn-cancel me-2\"\r\n                    data-bs-dismiss=\"modal\">\r\n                    Cancel\r\n                  </button>\r\n                  <button type=\"submit\" class=\"btn btn-submit\">Submit</button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n    </template>\r\n    <script>\r\n    import { ref, onMounted, onBeforeUnmount,nextTick } from 'vue';\r\n    \r\n    import 'select2'; \r\n    import feather from 'feather-icons';\r\n    import ClipLoader from 'vue-spinner/src/ClipLoader.vue';\r\n    import Swal from 'sweetalert2';\r\n    import Navbar from '/src/components/Admin/Navbar.vue';\r\n    export default {\r\n      components: {\r\n\r\n        Navbar,\r\n        ClipLoader,\r\n      },\r\n      setup() {\r\n    const apiURL = process.env.VUE_APP_URL;\r\n    const users = ref([]);\r\n    const loading = ref(false);\r\n    \r\n\r\n    const initializeDataTable = () => {\r\n    const tableElement = $('#user-table');\r\n\r\n    // Destroy existing DataTable instance if it exists\r\n    if ($.fn.DataTable.isDataTable(tableElement)) {\r\n        tableElement.DataTable().destroy();\r\n    }\r\n    // Reinitialize DataTable\r\n    tableElement.DataTable({\r\n        searching: true,\r\n        paging: true,\r\n        info: true,\r\n        responsive: true, // Optional: Makes table responsive\r\n    });\r\n};\r\n\r\n\r\nconst refreshDataTable = () => {\r\n    const table = $('#user-table').DataTable();\r\n    table.destroy(); // Destroy the current instance\r\n    initializeDataTable(); // Reinitialize with updated data\r\n};\r\n\r\n    const getUsers = async () => {\r\n      try {\r\n        loading.value = true;\r\n        const response = await axios.get(`${apiURL}/get_all_users`); // Adjust the URL as needed\r\n        users.value = response.data.users;\r\n        if(!response.success){\r\n          Swal.fire('Error', response.message,'error');\r\n          return;\r\n        }\r\n        nextTick(() => refreshDataTable());\r\n   \r\n      } catch (error) {\r\n        console.error('Error fetching users:', error.message);\r\n      } finally {\r\n        loading.value = false;\r\n      }\r\n    };\r\n\r\n    onMounted(async()=>{\r\n      await getUsers();\r\n    });\r\n\r\n    return {\r\n      users,\r\n      loading,\r\n    };\r\n  },\r\n\r\n   \r\n    };\r\n    \r\n    </script>\r\n    "],"mappings":"AAkSI,SAASA,GAAG,EAAEC,SAAS,EAAEC,eAAe,EAACC,QAAO,QAAS,KAAK;AAE9D,OAAO,SAAS;AAChB,OAAOC,OAAM,MAAO,eAAe;AACnC,OAAOC,UAAS,MAAO,gCAAgC;AACvD,OAAOC,IAAG,MAAO,aAAa;AAC9B,OAAOC,MAAK,MAAO,kCAAkC;AACrD,eAAe;EACbC,UAAU,EAAE;IAEVD,MAAM;IACNF;EACF,CAAC;EACDI,KAAKA,CAAA,EAAG;IACV,MAAMC,MAAK,GAAIC,OAAO,CAACC,GAAG,CAACC,WAAW;IACtC,MAAMC,KAAI,GAAId,GAAG,CAAC,EAAE,CAAC;IACrB,MAAMe,OAAM,GAAIf,GAAG,CAAC,KAAK,CAAC;IAG1B,MAAMgB,mBAAkB,GAAIA,CAAA,KAAM;MAClC,MAAMC,YAAW,GAAIC,CAAC,CAAC,aAAa,CAAC;;MAErC;MACA,IAAIA,CAAC,CAACC,EAAE,CAACC,SAAS,CAACC,WAAW,CAACJ,YAAY,CAAC,EAAE;QAC1CA,YAAY,CAACG,SAAS,CAAC,CAAC,CAACE,OAAO,CAAC,CAAC;MACtC;MACA;MACAL,YAAY,CAACG,SAAS,CAAC;QACnBG,SAAS,EAAE,IAAI;QACfC,MAAM,EAAE,IAAI;QACZC,IAAI,EAAE,IAAI;QACVC,UAAU,EAAE,IAAI,CAAE;MACtB,CAAC,CAAC;IACN,CAAC;IAGD,MAAMC,gBAAe,GAAIA,CAAA,KAAM;MAC3B,MAAMC,KAAI,GAAIV,CAAC,CAAC,aAAa,CAAC,CAACE,SAAS,CAAC,CAAC;MAC1CQ,KAAK,CAACN,OAAO,CAAC,CAAC,EAAE;MACjBN,mBAAmB,CAAC,CAAC,EAAE;IAC3B,CAAC;IAEG,MAAMa,QAAO,GAAI,MAAAA,CAAA,KAAY;MAC3B,IAAI;QACFd,OAAO,CAACe,KAAI,GAAI,IAAI;QACpB,MAAMC,QAAO,GAAI,MAAMC,KAAK,CAACC,GAAG,CAAC,GAAGvB,MAAM,gBAAgB,CAAC,EAAE;QAC7DI,KAAK,CAACgB,KAAI,GAAIC,QAAQ,CAACG,IAAI,CAACpB,KAAK;QACjC,IAAG,CAACiB,QAAQ,CAACI,OAAO,EAAC;UACnB7B,IAAI,CAAC8B,IAAI,CAAC,OAAO,EAAEL,QAAQ,CAACM,OAAO,EAAC,OAAO,CAAC;UAC5C;QACF;QACAlC,QAAQ,CAAC,MAAMwB,gBAAgB,CAAC,CAAC,CAAC;MAEpC,EAAE,OAAOW,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAACD,OAAO,CAAC;MACvD,UAAU;QACRtB,OAAO,CAACe,KAAI,GAAI,KAAK;MACvB;IACF,CAAC;IAED7B,SAAS,CAAC,YAAS;MACjB,MAAM4B,QAAQ,CAAC,CAAC;IAClB,CAAC,CAAC;IAEF,OAAO;MACLf,KAAK;MACLC;IACF,CAAC;EACH;AAGE,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}