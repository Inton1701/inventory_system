{"ast":null,"code":"import \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\nimport { ref, onMounted, onBeforeUnmount, nextTick } from 'vue';\nimport axios from 'axios';\nimport 'select2';\nimport feather from 'feather-icons';\nimport Sidebar from '/src/components/Admin/Sidebar.vue';\nimport Navbar from '/src/components/Admin/Navbar.vue';\nexport default {\n  components: {\n    Sidebar,\n    Navbar\n  },\n  setup() {\n    const inputedProduct = ref({\n      sku: '',\n      name: '',\n      description: '',\n      price: 0,\n      cost: 0,\n      category: '',\n      subCategory: '',\n      unit: '',\n      brand: '',\n      variant: '',\n      discount: 0,\n      discountType: '',\n      manufacturedDate: '',\n      expiryDate: '',\n      status: 'inactive',\n      image: {\n        file: null,\n        url: ''\n      } // Initialize the image field\n    });\n\n    // Test product data for testing purposes\n    const test = {\n      \"sku\": \"ABC123\",\n      \"name\": \"Product Name\",\n      \"description\": \"This is a product description.\",\n      \"price\": 25.99,\n      \"cost\": 15,\n      \"category\": \"Electronics\",\n      \"subCategory\": \"N/A\",\n      \"unit\": \"piece\",\n      \"brand\": \"BrandX\",\n      \"variant\": \"Color: Black\",\n      \"discount\": 10,\n      \"discountType\": \"percent\",\n      \"quantity\": 0,\n      \"quantityAlert\": 0,\n      \"manufacturedDate\": \"2023-01-01T00:00:00.000Z\",\n      \"expiryDate\": \"2025-01-01T00:00:00.000Z\",\n      \"imageUrl\": \"assets/img/no-image-icon.png\",\n      \"status\": \"active\",\n      \"stockStatus\": \"out-of-stock\"\n    };\n    const select = ref('.select');\n    onMounted(async () => {\n      try {\n        // Initialize select2 plugin\n        await $(select.value).select2();\n        // Initialize feather icons\n        await feather.replace();\n      } catch (error) {\n        console.log(error);\n      }\n    });\n    onBeforeUnmount(() => {\n      // Destroy select2 plugin on component unmount\n      $(select.value).select2('destroy');\n    });\n    const toggleStatus = event => {\n      inputedProduct.value.status = event.target.checked ? 'active' : 'inactive';\n    };\n    const autoGenerateSKU = () => {\n      inputedProduct.value.sku = generateEAN13();\n    };\n    const generateEAN13 = () => {\n      let digits = '';\n      for (let i = 0; i < 12; i++) {\n        digits += Math.floor(Math.random() * 10).toString();\n      }\n      let sumOdd = 0;\n      let sumEven = 0;\n      for (let i = 0; i < 12; i++) {\n        const digit = parseInt(digits[i], 10);\n        if (i % 2 === 0) {\n          sumOdd += digit;\n        } else {\n          sumEven += digit;\n        }\n      }\n      const totalSum = sumOdd + sumEven * 3;\n      const checksum = (10 - totalSum % 10) % 10;\n      return digits + checksum;\n    };\n    const addProduct = async () => {\n      try {\n        console.log(this.inputedProduct.value);\n        const response = await axios.post('http://localhost:5000/api/add_products', this.inputedProduct.value);\n        if (response.data.success) {\n          alert('Product added successfully!');\n        } else {\n          alert('Failed to add product');\n        }\n      } catch (error) {\n        console.error('Error adding product:', error);\n        alert('An error occurred while adding the product');\n      }\n    };\n\n    // Image upload and removal methods\n    const onFileChange = event => {\n      const file = event.target.files[0];\n      if (file) {\n        inputedProduct.value.image = {\n          file,\n          url: URL.createObjectURL(file)\n        };\n        nextTick(() => {\n          feather.replace(); // To replace the feather icons if needed\n        });\n      }\n    };\n    const removeImage = () => {\n      inputedProduct.value.image = {\n        url: ''\n      }; // Clear the image\n    };\n    return {\n      inputedProduct,\n      select,\n      addProduct,\n      autoGenerateSKU,\n      toggleStatus,\n      onFileChange,\n      removeImage\n    };\n  },\n  methods: {\n    filterTextInput(value) {\n      return value.replace(/[^a-zA-Z0-9.\\-() ]/g, '');\n    },\n    filterNumInput(value) {\n      return value.replace(/[^0-9.]/g, '');\n    }\n  }\n};","map":{"version":3,"names":["ref","onMounted","onBeforeUnmount","nextTick","axios","feather","Sidebar","Navbar","components","setup","inputedProduct","sku","name","description","price","cost","category","subCategory","unit","brand","variant","discount","discountType","manufacturedDate","expiryDate","status","image","file","url","test","select","$","value","select2","replace","error","console","log","toggleStatus","event","target","checked","autoGenerateSKU","generateEAN13","digits","i","Math","floor","random","toString","sumOdd","sumEven","digit","parseInt","totalSum","checksum","addProduct","response","post","data","success","alert","onFileChange","files","URL","createObjectURL","removeImage","methods","filterTextInput","filterNumInput"],"sources":["C:\\Users\\Administrator\\OneDrive\\Desktop\\POSExpress\\frontend\\src\\components\\Admin\\Inventory\\CreateProduct.vue"],"sourcesContent":["<template>\r\n    <Navbar />\r\n\r\n    <div class=\"page-wrapper\">\r\n        <div class=\"content\">\r\n            <div class=\"page-header\">\r\n                <div class=\"add-item d-flex\">\r\n                    <div class=\"page-title\">\r\n                        <h4>New Product</h4>\r\n                        <h6>Create new product</h6>\r\n                    </div>\r\n                </div>\r\n                <ul class=\"table-top-head\">\r\n                    <li>\r\n                        <div class=\"page-btn\">\r\n                            <router-link to=\"products\" class=\"btn btn-secondary\"><i data-feather=\"arrow-left\"\r\n                                    class=\"me-2\"></i>Back to Product</router-link>\r\n                        </div>\r\n                    </li>\r\n                    <li>\r\n                        <a data-bs-toggle=\"tooltip\" data-bs-placement=\"top\" title=\"Collapse\" id=\"collapse-header\"><i\r\n                                data-feather=\"chevron-up\" class=\"feather-chevron-up\"></i></a>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n            <form @submit.prevent=\"addProduct\">\r\n                <div class=\"card\">\r\n                    <div class=\"card-body add-product pb-0\">\r\n                        <div class=\"accordion-card-one accordion\" id=\"accordionExample\">\r\n                            <div class=\"accordion-item\">\r\n                                <div class=\"accordion-header\" id=\"headingOne\">\r\n                                    <div class=\"accordion-button\" data-bs-toggle=\"collapse\"\r\n                                        data-bs-target=\"#collapseOne\" aria-controls=\"collapseOne\">\r\n                                        <div class=\"addproduct-icon\">\r\n                                            <h5>\r\n                                                <i data-feather=\"info\" class=\"add-info\"></i><span>Product\r\n                                                    Information</span>\r\n                                            </h5>\r\n                                            <a href=\"javascript:void(0);\"><i data-feather=\"chevron-down\"\r\n                                                    class=\"chevron-down-add\"></i></a>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div id=\"collapseOne\" class=\"accordion-collapse collapse show\"\r\n                                    aria-labelledby=\"headingOne\" data-bs-parent=\"#accordionExample\">\r\n                                    <div class=\"accordion-body\">\r\n                                        <div class=\"row\">\r\n                                            <div class=\"col-lg-4 col-sm-6 col-12\">\r\n                                                <div class=\"mb-3 add-product\">\r\n                                                    <label class=\"form-label\">Status</label>\r\n                                                    <div\r\n                                                        class=\"status-toggle modal-status d-flex justify-content-between\">\r\n                                                        <span class=\"form-label\">{{ inputedProduct.status }}</span>\r\n                                                        <input type=\"checkbox\" id=\"user4\" class=\"check\"\r\n                                                            :checked=\"inputedProduct.status === 'active'\"\r\n                                                            @change=\"toggleStatus\" />\r\n                                                        <label for=\"user4\" class=\"checktoggle\"></label>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div class=\"row\">\r\n                                            <div class=\"col-lg-5 col-sm-6 col-12\">\r\n                                                <div class=\"input-blocks add-product list\">\r\n                                                    <label data-bs-toggle=\"tooltip\"\r\n                                                        title=\"Note: it must be 13 numbers\">SKU\r\n                                                        <i class=\"mb-1\" data-feather=\"help-circle\"\r\n                                                            style=\"height: 15px\"></i>\r\n                                                    </label>\r\n                                                    <input type=\"text\" id=\"sku\" class=\"form-control list\"\r\n                                                        placeholder=\"Enter SKU manually\" :maxlength=\"13\"\r\n                                                        v-model=\"inputedProduct.sku\"\r\n                                                        @input=\"inputedProduct.sku = filterNumInput($event.target.value)\"\r\n                                                        :class=\"{ 'is-invalid': inputedProduct.sku.length !== 13 && inputedProduct.sku.length > 0 }\"\r\n                                                        required />\r\n                                                    <div class=\"d-flex align-items-center mt-2\">\r\n                                                        <button type=\"button\" class=\"btn btn-primaryadd\"\r\n                                                            @click=\"autoGenerateSKU\">Auto Generate</button>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                            <div class=\"col-lg-5 col-sm-6 col-12\">\r\n                                                <div class=\"mb-3 add-product\">\r\n                                                    <label class=\"form-label\">Product Name</label>\r\n                                                    <input type=\"text\" class=\"form-control\"\r\n                                                        placeholder=\"Product name here.\" :maxlength=\"60\"\r\n                                                        v-model=\"inputedProduct.productName\"\r\n                                                        @input=\"productName = filterTextInput($event.target.value)\"\r\n                                                        required />\r\n                                                    <p class=\"mt-1\">Maximum of 60 Characters</p>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div class=\"addservice-info\">\r\n                                            <div class=\"row\">\r\n                                                <div class=\"col-lg-4 col-sm-6 col-12\">\r\n                                                    <div class=\"mb-3 add-product\">\r\n                                                        <div class=\"add-newplus\">\r\n                                                            <label class=\"form-label\">Category</label>\r\n                                                            <a href=\"javascript:void(0);\" data-bs-toggle=\"modal\"\r\n                                                                data-bs-target=\"#add-units-category\"><i\r\n                                                                    data-feather=\"plus-circle\"\r\n                                                                    class=\"plus-down-add\"></i><span>Add New</span></a>\r\n                                                        </div>\r\n                                                        <select class=\"select\" v-model=\"inputedProduct.category\">\r\n                                                            <option>None</option>\r\n                                                        </select>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div class=\"col-lg-4 col-sm-6 col-12\">\r\n                                                    <div class=\"mb-3 add-product\">\r\n                                                        <label class=\"form-label\">Sub Category</label>\r\n                                                        <select class=\"select\" v-model=\"inputedProduct.subCategory\">\r\n                                                            <option>None</option>\r\n                                                        </select>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div class=\"col-lg-4 col-sm-6 col-12\">\r\n                                                    <div class=\"mb-3 add-product\">\r\n                                                        <div class=\"add-newplus\">\r\n                                                            <label class=\"form-label\">Brand</label>\r\n                                                            <a href=\"javascript:void(0);\" data-bs-toggle=\"modal\"\r\n                                                                data-bs-target=\"#add-units-brand\"><i\r\n                                                                    data-feather=\"plus-circle\"\r\n                                                                    class=\"plus-down-add\"></i><span>Add New</span></a>\r\n                                                        </div>\r\n                                                        <select class=\"select\" v-model=\"inputedProduct.brand\">\r\n                                                            <option>None</option>\r\n                                                        </select>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div class=\"add-product-new\">\r\n                                            <div class=\"row\">\r\n                                                <div class=\"col-lg-4 col-sm-6 col-12\">\r\n                                                    <div class=\"mb-3 add-product\">\r\n                                                        <div class=\"add-newplus\">\r\n                                                            <label class=\"form-label\">Unit</label>\r\n                                                            <a href=\"javascript:void(0);\" data-bs-toggle=\"modal\"\r\n                                                                data-bs-target=\"#add-unit\"><i data-feather=\"plus-circle\"\r\n                                                                    class=\"plus-down-add\"></i><span>Add New</span></a>\r\n                                                        </div>\r\n                                                        <select class=\"select\" v-model=\"inputedProduct.unit\">\r\n                                                            <option>None</option>\r\n                                                        </select>\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div class=\"col-lg-4 col-sm-6 col-12\">\r\n                                                    <div class=\"mb-3 add-product\">\r\n                                                        <label class=\"form-label\">Manufactured Date</label>\r\n                                                        <input type=\"date\" class=\"form-control\"\r\n                                                            v-model=\"inputedProduct.manufacturedDate\" />\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div class=\"col-lg-4 col-sm-6 col-12\">\r\n                                                    <div class=\"mb-3 add-product\">\r\n                                                        <label class=\"form-label\">Expiry Date</label>\r\n                                                        <input type=\"date\" class=\"form-control\"\r\n                                                            v-model=\"inputedProduct.expiryDate\" />\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div class=\"col-lg-12\">\r\n                                            <div class=\"input-blocks summer-description-box transfer mb-3\">\r\n                                                <label>Description</label>\r\n                                                <textarea class=\"form-control h-100\" rows=\"5\"\r\n                                                    placeholder=\"Please type here the description\" :maxlength=\"150\"\r\n                                                    v-model=\"inputedProduct.productDescription\"\r\n                                                    @input=\"productDescription = filterTextInput($event.target.value)\"></textarea>\r\n                                                <p class=\"mt-1\">Maximum of 150 Characters</p>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <!-- Product Pricing Section -->\r\n                        <div class=\"accordion-card-one accordion\" id=\"accordionExample2\">\r\n                            <div class=\"accordion-item\">\r\n                                <div class=\"accordion-header\" id=\"headingTwo\">\r\n                                    <div class=\"accordion-button\" data-bs-toggle=\"collapse\"\r\n                                        data-bs-target=\"#collapseTwo\" aria-controls=\"collapseTwo\">\r\n                                        <div class=\"text-editor add-list\">\r\n                                            <div class=\"addproduct-icon list icon\">\r\n                                                <h5>\r\n                                                    <i data-feather=\"life-buoy\" class=\"add-info\"></i><span>Product\r\n                                                        Pricing</span>\r\n                                                </h5>\r\n                                                <a href=\"javascript:void(0);\"><i data-feather=\"chevron-down\"\r\n                                                        class=\"chevron-down-add\"></i></a>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div id=\"collapseTwo\" class=\"accordion-collapse collapse show\"\r\n                                    aria-labelledby=\"headingTwo\" data-bs-parent=\"#accordionExample2\">\r\n                                    <div class=\"accordion-body\">\r\n                                        <div class=\"row\">\r\n                                            <div class=\"col-lg-4 col-sm-6 col-12\">\r\n                                                <div class=\"mb-3 add-product\">\r\n                                                    <label class=\"form-label\">Price</label>\r\n                                                    <input type=\"number\" class=\"form-control\"\r\n                                                        v-model=\"inputedProduct.price\" required />\r\n                                                </div>\r\n                                            </div>\r\n                                            <div class=\"col-lg-4 col-sm-6 col-12\">\r\n                                                <div class=\"mb-3 add-product\">\r\n                                                    <label class=\"form-label\">Cost</label>\r\n                                                    <input type=\"number\" class=\"form-control\"\r\n                                                        v-model=\"inputedProduct.cost\" required />\r\n                                                </div>\r\n                                            </div>\r\n                                            <div class=\"col-lg-4 col-sm-6 col-12\">\r\n                                                <div class=\"mb-3 add-product\">\r\n                                                    <label class=\"form-label\">Discount Type</label>\r\n                                                    <select class=\"form-control\" v-model=\"inputedProduct.discountType\">\r\n                                                        <option value=\"none\">None</option>\r\n                                                        <option value=\"percent\">Percent</option>\r\n                                                        <option value=\"fixed\">Fixed</option>\r\n                                                    </select>\r\n                                                </div>\r\n                                            </div>\r\n                                            <div class=\"col-lg-4 col-sm-6 col-12\">\r\n                                                <div class=\"mb-3 add-product\">\r\n                                                    <label class=\"form-label\">Discount Value</label>\r\n                                                    <input type=\"number\" class=\"form-control\"\r\n                                                        v-model=\"inputedProduct.discountValue\" />\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                       \r\n                    </div>\r\n                    <!-- Save Buttons -->\r\n\r\n                </div>\r\n                <div class=\"col-lg-12\">\r\n                    <div class=\"btn-addproduct mb-4\">\r\n                        <button type=\"button\" class=\"btn btn-cancel me-2\">Cancel</button>\r\n                        <button type=\"submit\" class=\"btn btn-submit\">Save Product</button>\r\n                    </div>\r\n                </div>\r\n            </form>\r\n        </div>\r\n\r\n    </div>\r\n\r\n    <div class=\"modal fade\" id=\"add-units\">\r\n        <div class=\"modal-dialog modal-dialog-centered stock-adjust-modal\">\r\n            <div class=\"modal-content\">\r\n                <div class=\"page-wrapper-new p-0\">\r\n                    <div class=\"content\">\r\n                        <div class=\"modal-header border-0 custom-modal-header\">\r\n                            <div class=\"page-title\">\r\n                                <h4>Add Variation Attribute</h4>\r\n                            </div>\r\n                            <button type=\"button\" class=\"close\" data-bs-dismiss=\"modal\" aria-label=\"Close\">\r\n                                <span aria-hidden=\"true\">&times;</span>\r\n                            </button>\r\n                        </div>\r\n                        <div class=\"modal-body custom-modal-body\">\r\n                            <div class=\"row\">\r\n                                <div class=\"col-lg-12\">\r\n                                    <div class=\"input-blocks\">\r\n                                        <label>Attribute Name</label>\r\n                                        <input type=\"text\" class=\"form-control\"\r\n                                            v-model=\"inputedProduct.variantAttributes\" />\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"col-lg-12\">\r\n                                    <div class=\"input-blocks\">\r\n                                        <label>Add Value</label>\r\n                                        <input type=\"text\" class=\"form-control\" />\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"row\">\r\n                                <div class=\"col-lg-6\">\r\n\r\n                                </div>\r\n                                <div class=\"col-lg-6\">\r\n                                    <div class=\"modal-footer-btn popup\">\r\n                                        <a href=\"javascript:void(0);\" class=\"btn btn-cancel me-2\"\r\n                                            data-bs-dismiss=\"modal\">Cancel</a>\r\n                                        <a href=\"javascript:void(0);\" class=\"btn btn-submit\"\r\n                                            data-bs-dismiss=\"modal\">Create Attribute</a>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class=\"modal fade\" id=\"add-units-category\">\r\n        <div class=\"modal-dialog modal-dialog-centered custom-modal-two\">\r\n            <div class=\"modal-content\">\r\n                <div class=\"page-wrapper-new p-0\">\r\n                    <div class=\"content\">\r\n                        <div class=\"modal-header border-0 custom-modal-header\">\r\n                            <div class=\"page-title\">\r\n                                <h4>Add New Category</h4>\r\n                            </div>\r\n                            <button type=\"button\" class=\"close\" data-bs-dismiss=\"modal\" aria-label=\"Close\">\r\n                                <span aria-hidden=\"true\">&times;</span>\r\n                            </button>\r\n                        </div>\r\n                        <div class=\"modal-body custom-modal-body\">\r\n                            <div class=\"mb-3\">\r\n                                <label class=\"form-label\">Name</label>\r\n                                <input type=\"text\" class=\"form-control\" />\r\n                            </div>\r\n                            <div class=\"modal-footer-btn\">\r\n                                <a href=\"javascript:void(0);\" class=\"btn btn-cancel me-2\"\r\n                                    data-bs-dismiss=\"modal\">Cancel</a>\r\n                                <a href=\"add-product.html\" class=\"btn btn-submit\">Submit</a>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class=\"modal fade\" id=\"add-units-brand\">\r\n        <div class=\"modal-dialog modal-dialog-centered custom-modal-two\">\r\n            <div class=\"modal-content\">\r\n                <div class=\"page-wrapper-new p-0\">\r\n                    <div class=\"content\">\r\n                        <div class=\"modal-header border-0 custom-modal-header\">\r\n                            <div class=\"page-title\">\r\n                                <h4>Add New Brand</h4>\r\n                            </div>\r\n                            <button type=\"button\" class=\"close\" data-bs-dismiss=\"modal\" aria-label=\"Close\">\r\n                                <span aria-hidden=\"true\">&times;</span>\r\n                            </button>\r\n                        </div>\r\n                        <div class=\"modal-body custom-modal-body\">\r\n                            <div class=\"mb-3\">\r\n                                <label class=\"form-label\">Brand</label>\r\n                                <input type=\"text\" class=\"form-control\" />\r\n                            </div>\r\n                            <div class=\"modal-footer-btn\">\r\n                                <a href=\"javascript:void(0);\" class=\"btn btn-cancel me-2\"\r\n                                    data-bs-dismiss=\"modal\">Cancel</a>\r\n                                <a href=\"add-product.html\" class=\"btn btn-submit\">Submit</a>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class=\"modal fade\" id=\"add-unit\">\r\n        <div class=\"modal-dialog modal-dialog-centered custom-modal-two\">\r\n            <div class=\"modal-content\">\r\n                <div class=\"page-wrapper-new p-0\">\r\n                    <div class=\"content\">\r\n                        <div class=\"modal-header border-0 custom-modal-header\">\r\n                            <div class=\"page-title\">\r\n                                <h4>Add Unit</h4>\r\n                            </div>\r\n                            <button type=\"button\" class=\"close\" data-bs-dismiss=\"modal\" aria-label=\"Close\">\r\n                                <span aria-hidden=\"true\">&times;</span>\r\n                            </button>\r\n                        </div>\r\n                        <div class=\"modal-body custom-modal-body\">\r\n                            <div class=\"mb-3\">\r\n                                <label class=\"form-label\">Unit</label>\r\n                                <input type=\"text\" class=\"form-control\" />\r\n                            </div>\r\n                            <div class=\"modal-footer-btn\">\r\n                                <a href=\"javascript:void(0);\" class=\"btn btn-cancel me-2\"\r\n                                    data-bs-dismiss=\"modal\">Cancel</a>\r\n                                <a href=\"add-product.html\" class=\"btn btn-submit\">Submit</a>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class=\"modal fade\" id=\"add-variation\">\r\n        <div class=\"modal-dialog modal-dialog-centered custom-modal-two\">\r\n            <div class=\"modal-content\">\r\n                <div class=\"page-wrapper-new p-0\">\r\n                    <div class=\"content\">\r\n                        <div class=\"modal-header border-0 custom-modal-header\">\r\n                            <div class=\"page-title\">\r\n                                <h4>Add Variation</h4>\r\n                            </div>\r\n                            <button type=\"button\" class=\"close\" data-bs-dismiss=\"modal\" aria-label=\"Close\">\r\n                                <span aria-hidden=\"true\">&times;</span>\r\n                            </button>\r\n                        </div>\r\n                        <div class=\"modal-body custom-modal-body\">\r\n                            <div class=\"modal-title-head people-cust-avatar\">\r\n                                <h6>Variant Thumbnail</h6>\r\n                            </div>\r\n                            <div class=\"new-employee-field\">\r\n                                <div class=\"profile-pic-upload\">\r\n                                    <div class=\"profile-pic\">\r\n                                        <span><i data-feather=\"plus-circle\" class=\"plus-down-add\"></i>\r\n                                            Add Image</span>\r\n                                    </div>\r\n                                    <div class=\"mb-3\">\r\n                                        <div class=\"image-upload mb-0\">\r\n                                            <input type=\"file\" />\r\n                                            <div class=\"image-uploads\">\r\n                                                <h4>Change Image</h4>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"row\">\r\n                                <div class=\"col-lg-6 pe-0\">\r\n                                    <div class=\"mb-3\">\r\n                                        <label class=\"form-label\">Barcode Symbology</label>\r\n                                        <select class=\"select\">\r\n                                            <option>Choose</option>\r\n                                            <option>Code34</option>\r\n                                        </select>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"col-lg-6 pe-0\">\r\n                                    <div class=\"mb-3\">\r\n                                        <div class=\"input-blocks add-product list\">\r\n                                            <label>Item Code</label>\r\n                                            <input type=\"text\" class=\"form-control list\" value=\"455454478844\" />\r\n                                            <button type=\"submit\" class=\"btn btn-primaryadd\">\r\n                                                Generate Code\r\n                                            </button>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"col-lg-12\">\r\n                                    <div class=\"input-blocks image-upload-down\">\r\n                                        <div class=\"image-upload download\">\r\n                                            <input type=\"file\" />\r\n                                            <div class=\"image-uploads\">\r\n                                                <img src=\"/assets/img/download-img.png\" alt=\"img\" />\r\n                                                <h4>Drag and drop a <span>file to upload</span></h4>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class=\"accordion-body\">\r\n                                        <div class=\"text-editor add-list add\">\r\n                                            <div class=\"col-lg-12\">\r\n                                                <div class=\"add-choosen mb-3\">\r\n                                                    <div class=\"phone-img ms-0\">\r\n                                                        <img src=\"/assets/img/products/phone-add-2.png\" alt=\"image\" />\r\n                                                        <a href=\"javascript:void(0);\"><i data-feather=\"x\"\r\n                                                                class=\"x-square-add remove-product\"></i></a>\r\n                                                    </div>\r\n                                                    <div class=\"phone-img\">\r\n                                                        <img src=\"/assets/img/products/phone-add-1.png\" alt=\"image\" />\r\n                                                        <a href=\"javascript:void(0);\"><i data-feather=\"x\"\r\n                                                                class=\"x-square-add remove-product\"></i></a>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"col-lg-6 pe-0\">\r\n                                    <div class=\"mb-3\">\r\n                                        <label class=\"form-label\">Quantity</label>\r\n                                        <input type=\"text\" class=\"form-control\" />\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"col-lg-6 pe-0\">\r\n                                    <div class=\"mb-3\">\r\n                                        <label class=\"form-label\">Quantity Alert</label>\r\n                                        <input type=\"text\" class=\"form-control\" />\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"col-lg-6 pe-0\">\r\n                                    <div class=\"mb-3\">\r\n                                        <label class=\"form-label\">Tax Type</label>\r\n                                        <select class=\"select\">\r\n                                            <option>Choose</option>\r\n                                            <option>Direct</option>\r\n                                            <option>Indirect</option>\r\n                                        </select>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"col-lg-6 pe-0\">\r\n                                    <div class=\"mb-3\">\r\n                                        <label class=\"form-label\">Tax </label>\r\n                                        <select class=\"select\">\r\n                                            <option>Choose</option>\r\n                                            <option>Income Tax</option>\r\n                                            <option>Service Tax</option>\r\n                                        </select>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"col-lg-12 pe-0\">\r\n                                    <div class=\"mb-3\">\r\n                                        <label class=\"form-label\">Discount Type </label>\r\n                                        <select class=\"select\">\r\n                                            <option>Choose</option>\r\n                                            <option>Percentage</option>\r\n                                            <option>Early Payment</option>\r\n                                        </select>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"col-lg-12 pe-0\">\r\n                                    <div>\r\n                                        <label class=\"form-label\">Discount Value</label>\r\n                                        <input type=\"text\" class=\"form-control\" />\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"modal-footer-btn\">\r\n                                <a href=\"javascript:void(0);\" class=\"btn btn-cancel me-2\"\r\n                                    data-bs-dismiss=\"modal\">Cancel</a>\r\n                                <a href=\"add-product.html\" class=\"btn btn-submit\">Submit</a>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport { ref, onMounted, onBeforeUnmount, nextTick } from 'vue';\r\nimport axios from 'axios';\r\nimport 'select2';\r\nimport feather from 'feather-icons';\r\n\r\nimport Sidebar from '/src/components/Admin/Sidebar.vue';\r\nimport Navbar from '/src/components/Admin/Navbar.vue';\r\n\r\nexport default {\r\n    components: {\r\n        Sidebar,\r\n        Navbar,\r\n    },\r\n    setup() {\r\n        const inputedProduct = ref({\r\n    sku: '',\r\n    name: '',\r\n    description: '',\r\n    price: 0,\r\n    cost: 0,\r\n    category: '', \r\n    subCategory: '',\r\n    unit: '',\r\n    brand: '',\r\n    variant: '',\r\n    discount: 0,\r\n    discountType: '',\r\n    manufacturedDate: '',\r\n    expiryDate: '',\r\n    status: 'inactive',\r\n    image: { file: null, url: '' } // Initialize the image field\r\n});\r\n\r\n        // Test product data for testing purposes\r\n        const test = {\r\n            \"sku\": \"ABC123\",\r\n            \"name\": \"Product Name\",\r\n            \"description\": \"This is a product description.\",\r\n            \"price\": 25.99,\r\n            \"cost\": 15,\r\n            \"category\": \"Electronics\",\r\n            \"subCategory\": \"N/A\",\r\n            \"unit\": \"piece\",\r\n            \"brand\": \"BrandX\",\r\n            \"variant\": \"Color: Black\",\r\n            \"discount\": 10,\r\n            \"discountType\": \"percent\",\r\n            \"quantity\": 0,\r\n            \"quantityAlert\": 0,\r\n            \"manufacturedDate\": \"2023-01-01T00:00:00.000Z\",\r\n            \"expiryDate\": \"2025-01-01T00:00:00.000Z\",\r\n            \"imageUrl\": \"assets/img/no-image-icon.png\",\r\n            \"status\": \"active\",\r\n            \"stockStatus\": \"out-of-stock\"\r\n        };\r\n\r\n        const select = ref('.select');\r\n        \r\n        onMounted(async () => {\r\n            try {\r\n                // Initialize select2 plugin\r\n                await $(select.value).select2();\r\n                // Initialize feather icons\r\n                await feather.replace();\r\n            } catch (error) {\r\n                console.log(error);\r\n            }\r\n        });\r\n        \r\n        onBeforeUnmount(() => {\r\n            // Destroy select2 plugin on component unmount\r\n            $(select.value).select2('destroy');\r\n        });\r\n\r\n        const toggleStatus = (event) => {\r\n            inputedProduct.value.status = event.target.checked ? 'active' : 'inactive';\r\n        };\r\n\r\n        const autoGenerateSKU = () => {\r\n            inputedProduct.value.sku = generateEAN13();\r\n        };\r\n\r\n        const generateEAN13 = () => {\r\n            let digits = '';\r\n            for (let i = 0; i < 12; i++) {\r\n                digits += Math.floor(Math.random() * 10).toString();\r\n            }\r\n            let sumOdd = 0;\r\n            let sumEven = 0;\r\n            for (let i = 0; i < 12; i++) {\r\n                const digit = parseInt(digits[i], 10);\r\n                if (i % 2 === 0) {\r\n                    sumOdd += digit;\r\n                } else {\r\n                    sumEven += digit;\r\n                }\r\n            }\r\n            const totalSum = sumOdd + (sumEven * 3);\r\n            const checksum = (10 - (totalSum % 10)) % 10;\r\n            return digits + checksum;\r\n        };\r\n\r\n        const addProduct = async () => {\r\n    try {\r\n        console.log(this.inputedProduct.value);\r\n        const response = await axios.post('http://localhost:5000/api/add_products', this.inputedProduct.value);\r\n        if (response.data.success) {\r\n            alert('Product added successfully!');\r\n        } else {\r\n            alert('Failed to add product');\r\n        }\r\n    } catch (error) {\r\n        console.error('Error adding product:', error);\r\n        alert('An error occurred while adding the product');\r\n    }\r\n};\r\n\r\n        // Image upload and removal methods\r\n        const onFileChange = (event) => {\r\n            const file = event.target.files[0];\r\n            if (file) {\r\n                inputedProduct.value.image = { file, url: URL.createObjectURL(file) };\r\n                nextTick(() => {\r\n                    feather.replace(); // To replace the feather icons if needed\r\n                });\r\n            }\r\n        };\r\n\r\n        const removeImage = () => {\r\n            inputedProduct.value.image = { url: '' }; // Clear the image\r\n        };\r\n\r\n        return {\r\n            inputedProduct,\r\n            select,\r\n            addProduct,\r\n            autoGenerateSKU,\r\n            toggleStatus,\r\n            onFileChange,\r\n            removeImage\r\n        };\r\n    },\r\n    methods: {\r\n        filterTextInput(value) {\r\n            return value.replace(/[^a-zA-Z0-9.\\-() ]/g, '');\r\n        },\r\n        filterNumInput(value) {\r\n            return value.replace(/[^0-9.]/g, '');\r\n        }\r\n    }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.is-invalid {\r\n    border-color: red;\r\n}\r\n\r\n.text-danger {\r\n    color: red;\r\n}\r\n</style>"],"mappings":";;;AAwhBA,SAASA,GAAG,EAAEC,SAAS,EAAEC,eAAe,EAAEC,QAAO,QAAS,KAAK;AAC/D,OAAOC,KAAI,MAAO,OAAO;AACzB,OAAO,SAAS;AAChB,OAAOC,OAAM,MAAO,eAAe;AAEnC,OAAOC,OAAM,MAAO,mCAAmC;AACvD,OAAOC,MAAK,MAAO,kCAAkC;AAErD,eAAe;EACXC,UAAU,EAAE;IACRF,OAAO;IACPC;EACJ,CAAC;EACDE,KAAKA,CAAA,EAAG;IACJ,MAAMC,cAAa,GAAIV,GAAG,CAAC;MAC/BW,GAAG,EAAE,EAAE;MACPC,IAAI,EAAE,EAAE;MACRC,WAAW,EAAE,EAAE;MACfC,KAAK,EAAE,CAAC;MACRC,IAAI,EAAE,CAAC;MACPC,QAAQ,EAAE,EAAE;MACZC,WAAW,EAAE,EAAE;MACfC,IAAI,EAAE,EAAE;MACRC,KAAK,EAAE,EAAE;MACTC,OAAO,EAAE,EAAE;MACXC,QAAQ,EAAE,CAAC;MACXC,YAAY,EAAE,EAAE;MAChBC,gBAAgB,EAAE,EAAE;MACpBC,UAAU,EAAE,EAAE;MACdC,MAAM,EAAE,UAAU;MAClBC,KAAK,EAAE;QAAEC,IAAI,EAAE,IAAI;QAAEC,GAAG,EAAE;MAAG,EAAE;IACnC,CAAC,CAAC;;IAEM;IACA,MAAMC,IAAG,GAAI;MACT,KAAK,EAAE,QAAQ;MACf,MAAM,EAAE,cAAc;MACtB,aAAa,EAAE,gCAAgC;MAC/C,OAAO,EAAE,KAAK;MACd,MAAM,EAAE,EAAE;MACV,UAAU,EAAE,aAAa;MACzB,aAAa,EAAE,KAAK;MACpB,MAAM,EAAE,OAAO;MACf,OAAO,EAAE,QAAQ;MACjB,SAAS,EAAE,cAAc;MACzB,UAAU,EAAE,EAAE;MACd,cAAc,EAAE,SAAS;MACzB,UAAU,EAAE,CAAC;MACb,eAAe,EAAE,CAAC;MAClB,kBAAkB,EAAE,0BAA0B;MAC9C,YAAY,EAAE,0BAA0B;MACxC,UAAU,EAAE,8BAA8B;MAC1C,QAAQ,EAAE,QAAQ;MAClB,aAAa,EAAE;IACnB,CAAC;IAED,MAAMC,MAAK,GAAI9B,GAAG,CAAC,SAAS,CAAC;IAE7BC,SAAS,CAAC,YAAY;MAClB,IAAI;QACA;QACA,MAAM8B,CAAC,CAACD,MAAM,CAACE,KAAK,CAAC,CAACC,OAAO,CAAC,CAAC;QAC/B;QACA,MAAM5B,OAAO,CAAC6B,OAAO,CAAC,CAAC;MAC3B,EAAE,OAAOC,KAAK,EAAE;QACZC,OAAO,CAACC,GAAG,CAACF,KAAK,CAAC;MACtB;IACJ,CAAC,CAAC;IAEFjC,eAAe,CAAC,MAAM;MAClB;MACA6B,CAAC,CAACD,MAAM,CAACE,KAAK,CAAC,CAACC,OAAO,CAAC,SAAS,CAAC;IACtC,CAAC,CAAC;IAEF,MAAMK,YAAW,GAAKC,KAAK,IAAK;MAC5B7B,cAAc,CAACsB,KAAK,CAACP,MAAK,GAAIc,KAAK,CAACC,MAAM,CAACC,OAAM,GAAI,QAAO,GAAI,UAAU;IAC9E,CAAC;IAED,MAAMC,eAAc,GAAIA,CAAA,KAAM;MAC1BhC,cAAc,CAACsB,KAAK,CAACrB,GAAE,GAAIgC,aAAa,CAAC,CAAC;IAC9C,CAAC;IAED,MAAMA,aAAY,GAAIA,CAAA,KAAM;MACxB,IAAIC,MAAK,GAAI,EAAE;MACf,KAAK,IAAIC,CAAA,GAAI,CAAC,EAAEA,CAAA,GAAI,EAAE,EAAEA,CAAC,EAAE,EAAE;QACzBD,MAAK,IAAKE,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,CAAC,IAAI,EAAE,CAAC,CAACC,QAAQ,CAAC,CAAC;MACvD;MACA,IAAIC,MAAK,GAAI,CAAC;MACd,IAAIC,OAAM,GAAI,CAAC;MACf,KAAK,IAAIN,CAAA,GAAI,CAAC,EAAEA,CAAA,GAAI,EAAE,EAAEA,CAAC,EAAE,EAAE;QACzB,MAAMO,KAAI,GAAIC,QAAQ,CAACT,MAAM,CAACC,CAAC,CAAC,EAAE,EAAE,CAAC;QACrC,IAAIA,CAAA,GAAI,MAAM,CAAC,EAAE;UACbK,MAAK,IAAKE,KAAK;QACnB,OAAO;UACHD,OAAM,IAAKC,KAAK;QACpB;MACJ;MACA,MAAME,QAAO,GAAIJ,MAAK,GAAKC,OAAM,GAAI,CAAE;MACvC,MAAMI,QAAO,GAAI,CAAC,EAAC,GAAKD,QAAO,GAAI,EAAG,IAAI,EAAE;MAC5C,OAAOV,MAAK,GAAIW,QAAQ;IAC5B,CAAC;IAED,MAAMC,UAAS,GAAI,MAAAA,CAAA,KAAY;MACnC,IAAI;QACApB,OAAO,CAACC,GAAG,CAAC,IAAI,CAAC3B,cAAc,CAACsB,KAAK,CAAC;QACtC,MAAMyB,QAAO,GAAI,MAAMrD,KAAK,CAACsD,IAAI,CAAC,wCAAwC,EAAE,IAAI,CAAChD,cAAc,CAACsB,KAAK,CAAC;QACtG,IAAIyB,QAAQ,CAACE,IAAI,CAACC,OAAO,EAAE;UACvBC,KAAK,CAAC,6BAA6B,CAAC;QACxC,OAAO;UACHA,KAAK,CAAC,uBAAuB,CAAC;QAClC;MACJ,EAAE,OAAO1B,KAAK,EAAE;QACZC,OAAO,CAACD,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;QAC7C0B,KAAK,CAAC,4CAA4C,CAAC;MACvD;IACJ,CAAC;;IAEO;IACA,MAAMC,YAAW,GAAKvB,KAAK,IAAK;MAC5B,MAAMZ,IAAG,GAAIY,KAAK,CAACC,MAAM,CAACuB,KAAK,CAAC,CAAC,CAAC;MAClC,IAAIpC,IAAI,EAAE;QACNjB,cAAc,CAACsB,KAAK,CAACN,KAAI,GAAI;UAAEC,IAAI;UAAEC,GAAG,EAAEoC,GAAG,CAACC,eAAe,CAACtC,IAAI;QAAE,CAAC;QACrExB,QAAQ,CAAC,MAAM;UACXE,OAAO,CAAC6B,OAAO,CAAC,CAAC,EAAE;QACvB,CAAC,CAAC;MACN;IACJ,CAAC;IAED,MAAMgC,WAAU,GAAIA,CAAA,KAAM;MACtBxD,cAAc,CAACsB,KAAK,CAACN,KAAI,GAAI;QAAEE,GAAG,EAAE;MAAG,CAAC,EAAE;IAC9C,CAAC;IAED,OAAO;MACHlB,cAAc;MACdoB,MAAM;MACN0B,UAAU;MACVd,eAAe;MACfJ,YAAY;MACZwB,YAAY;MACZI;IACJ,CAAC;EACL,CAAC;EACDC,OAAO,EAAE;IACLC,eAAeA,CAACpC,KAAK,EAAE;MACnB,OAAOA,KAAK,CAACE,OAAO,CAAC,qBAAqB,EAAE,EAAE,CAAC;IACnD,CAAC;IACDmC,cAAcA,CAACrC,KAAK,EAAE;MAClB,OAAOA,KAAK,CAACE,OAAO,CAAC,UAAU,EAAE,EAAE,CAAC;IACxC;EACJ;AACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}