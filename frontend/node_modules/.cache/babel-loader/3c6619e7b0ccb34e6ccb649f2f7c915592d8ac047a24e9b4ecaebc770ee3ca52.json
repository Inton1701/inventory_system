{"ast":null,"code":"import \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\nimport { ref, onMounted, nextTick } from 'vue';\nimport { modalController } from '@/utils/modalController';\nimport 'select2';\nimport feather from 'feather-icons';\nimport Swal from 'sweetalert2';\nimport Navbar from '/src/components/Admin/Navbar.vue';\nimport ClipLoader from 'vue-spinner/src/ClipLoader.vue';\nimport $ from 'jquery';\nimport axios from 'axios';\nexport default {\n  components: {\n    Navbar,\n    ClipLoader\n  },\n  setup() {\n    const apiURL = process.env.VUE_APP_URL;\n    const imageURL = process.env.VUE_APP_IMAGE_URL;\n    const users = ref([]);\n    const loading = ref(false);\n    const isOnline = ref('Online');\n    const newUser = ref({\n      firstName: '',\n      lastName: '',\n      phone: '',\n      email: '',\n      birthdate: '',\n      role: 'Cashier',\n      password: '',\n      confPassword: '',\n      image: {\n        file: null,\n        url: null\n      }\n    });\n    const editUser = ref({\n      _id: '',\n      firstName: '',\n      lastName: '',\n      phone: '',\n      email: '',\n      birthdate: '',\n      role: '',\n      password: '',\n      confPassword: '',\n      status: '',\n      login: '',\n      logout: '',\n      image: {\n        file: null,\n        url: null\n      },\n      userStatus: 'Disabled',\n      isImageRemoved: false\n    });\n    const triggerFileInput = User => {\n      if (User === 'new') {\n        document.querySelector('#new-User-file-input').click();\n      } else if (User === 'edit') {\n        document.querySelector('#edit-User-file-input').click();\n      }\n    };\n    const onFileChange = (User, event) => {\n      const file = event.target.files[0];\n      if (file) {\n        const imageData = {\n          file,\n          url: URL.createObjectURL(file)\n        };\n        if (User === 'new') {\n          newUser.value.image = imageData;\n        } else if (User === 'edit') {\n          editUser.value.image = imageData;\n        }\n      }\n    };\n    const removeImage = User => {\n      if (User === 'new') {\n        newUser.value.image = {\n          file: null,\n          url: null\n        };\n      } else if (User === 'edit') {\n        editUser.value.image = {\n          file: null,\n          url: null\n        };\n        editUser.value.isimageRemoved = true;\n      }\n      console.log(editUser.value.image);\n    };\n    const initializeDataTable = () => {\n      const tableElement = $('#user-table');\n      if ($.fn.DataTable.isDataTable(tableElement)) {\n        tableElement.DataTable().destroy();\n      }\n      tableElement.DataTable({\n        searching: true,\n        paging: true,\n        info: true,\n        responsive: true\n      });\n    };\n    const refreshDataTable = () => {\n      const table = $('#user-table').DataTable();\n      table.destroy();\n      initializeDataTable();\n    };\n    const getUsers = async () => {\n      try {\n        loading.value = true;\n        const response = await axios.get(`${apiURL}/get_all_users`);\n        users.value = response.data.users;\n        this.$nextTick(() => refreshDataTable());\n      } catch (error) {\n        console.error('Error fetching users:', error.message);\n      } finally {\n        loading.value = false;\n      }\n    };\n    const addUser = async () => {\n      if (newUser.value.password !== newUser.value.confPassword) {\n        Swal.fire('Error', 'Passwords do not match', 'error');\n        return;\n      }\n      const formData = new FormData();\n      formData.append('firstName', newUser.value.firstName); // Ensure firstName is not empty\n      formData.append('lastName', newUser.value.lastName); // Ensure lastName is not empty\n      formData.append('email', newUser.value.email); // Ensure email is not empty\n      formData.append('phone', newUser.value.phone); // Ensure phone is not empty\n      formData.append('birthdate', newUser.value.birthdate); // Ensure birthdate is not empty\n      formData.append('role', newUser.value.role); // Ensure role is not empty\n      formData.append('password', newUser.value.password); // Ensure password is not empty\n      if (newUser.value.image.file) {\n        formData.append('image', newUser.value.image.file);\n      }\n      try {\n        const response = await axios.post(`${apiURL}/add_user`, formData, {\n          headers: {\n            'Content-Type': 'multipart/form-data'\n          }\n        });\n        if (response.data.success) {\n          Swal.fire('Success', 'User added successfully!', 'success');\n          document.querySelector('#add-users .btn-cancel').click();\n        } else {\n          Swal.fire('Error', response.data.error, 'error');\n          document.querySelector('#add-users .btn-cancel').click();\n        }\n      } catch (error) {\n        console.error('Error adding user:', error.message);\n        console.error('Error adding user:', error.response.data.message || error.message);\n      } finally {\n        getUsers();\n      }\n    };\n    const openEditModal = async id => {\n      const response = await axios.get(`${apiURL}/get_user/${id}`);\n      const user = response.data.user;\n      editUser.value = {\n        _id: user._id,\n        firstName: user.firstName,\n        lastName: user.lastName,\n        phone: user.phone,\n        email: user.email,\n        birthdate: user.birthdate,\n        role: user.role,\n        status: user.status,\n        login: user.login,\n        logout: user.logout,\n        image: {\n          file: null,\n          url: `${imageURL}${user.image}`\n        },\n        userStatus: user.userStatus || 'Disabled'\n      };\n      isOnline.value = user.status;\n    };\n    onMounted(async () => {\n      await getUsers();\n      feather.replace();\n      initializeDataTable();\n    });\n    return {\n      users,\n      addUser,\n      newUser,\n      loading,\n      removeImage,\n      onFileChange,\n      triggerFileInput,\n      openEditModal,\n      editUser,\n      imageURL,\n      isOnline\n    };\n  }\n};","map":{"version":3,"names":["ref","onMounted","nextTick","modalController","feather","Swal","Navbar","ClipLoader","$","axios","components","setup","apiURL","process","env","VUE_APP_URL","imageURL","VUE_APP_IMAGE_URL","users","loading","isOnline","newUser","firstName","lastName","phone","email","birthdate","role","password","confPassword","image","file","url","editUser","_id","status","login","logout","userStatus","isImageRemoved","triggerFileInput","User","document","querySelector","click","onFileChange","event","target","files","imageData","URL","createObjectURL","value","removeImage","isimageRemoved","console","log","initializeDataTable","tableElement","fn","DataTable","isDataTable","destroy","searching","paging","info","responsive","refreshDataTable","table","getUsers","response","get","data","$nextTick","error","message","addUser","fire","formData","FormData","append","post","headers","success","openEditModal","id","user","replace"],"sources":["C:\\Users\\Administrator\\OneDrive\\Desktop\\POSExpress\\frontend\\src\\components\\Admin\\Users\\Staffs.vue"],"sourcesContent":["<template>\r\n  <Navbar />\r\n  <Sidebar />\r\n  <div class=\"page-wrapper\">\r\n    <div class=\"content\">\r\n      <div class=\"page-header\">\r\n        <div class=\"add-item d-flex\">\r\n          <div class=\"page-title\">\r\n            <h4>User List</h4>\r\n            <h6>Manage Your Users</h6>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"page-btn\">\r\n          <a href=\"#\" class=\"btn btn-added\" data-bs-toggle=\"modal\" data-bs-target=\"#add-users\"><i\r\n              data-feather=\"plus-circle\" class=\"me-2\"></i>Add New User</a>\r\n        </div>\r\n      </div>\r\n\r\n      <div class=\"card table-list-card\">\r\n        <div class=\"card-body\">\r\n          <div class=\"table-responsive\">\r\n            <ClipLoader v-if=\"loading\" />\r\n            <table v-else class=\"table\" id=\"user-table\">\r\n              <thead>\r\n                <tr>\r\n                  <th>User Full Name</th>\r\n                  <th>Phone</th>\r\n                  <th>Email</th>\r\n                  <th>Status</th>\r\n                  <th>Login-Time</th>\r\n                  <th>Logout-Time</th>\r\n                  <th>Role</th>\r\n                  <th>Created On</th>\r\n                  <th class=\"no-sort\">Action</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                <tr v-for=\"user in users\" :key=\"user._id\">\r\n                  <td>{{ user.firstName }} {{ user.lastName }}</td>\r\n                  <td>{{ user.phone }}</td>\r\n                  <td>{{ user.email }}</td>\r\n                  <td> <span :class=\"{\r\n                    'badge': true,\r\n                    'badge-linesuccess': user.status === 'Online',\r\n                    'badge-linewarning': user.status === 'Offline'\r\n                  }\">\r\n                      {{ user.status }}\r\n                    </span></td>\r\n                  <td>{{ new Date(user.login).toLocaleString() }}</td>\r\n                  <td>{{ new Date(user.logout).toLocaleString() }}</td>\r\n                  <td>{{ user.role }}</td>\r\n                  <td>{{ new Date(user.createdAt).toLocaleString() }}</td>\r\n                  <td class=\"action-table-data\">\r\n                    <div class=\"edit-delete-action\">\r\n                      <a class=\"me-2 p-2\" href=\"#\" data-bs-toggle=\"modal\" data-bs-target=\"#edit-users\"\r\n                        @click=\"openEditModal(user._id)\">\r\n                        <i data-feather=\"edit\" class=\"feather-edit\"></i>\r\n                      </a>\r\n                      <a class=\"confirm-text p-2\" href=\"javascript:void(0);\" @click=\"deleteUser(user._id)\">\r\n                        <i data-feather=\"trash-2\" class=\"feather-trash-2\"></i>\r\n                      </a>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n\r\n  <div class=\"modal fade\" id=\"add-users\">\r\n    <div class=\"modal-dialog modal-dialog-centered custom-modal-two\">\r\n      <div class=\"modal-content\">\r\n        <div class=\"page-wrapper-new p-0\">\r\n          <div class=\"content\">\r\n            <div class=\"modal-header border-0 custom-modal-header\">\r\n              <div class=\"page-title\">\r\n                <h4>Add User</h4>\r\n              </div>\r\n              <button type=\"button\" class=\"close\" data-bs-dismiss=\"modal\" aria-label=\"Close\">\r\n                <span aria-hidden=\"true\">&times;</span>\r\n              </button>\r\n            </div>\r\n            <div class=\"modal-body custom-modal-body new-employee-field\">\r\n              <form @submit.prevent=\"addUser\">\r\n                <div class=\"row\">\r\n                  <div class=\"col-lg-12\">\r\n                    <label class=\"form-label\">User Profile</label>\r\n                    <div class=\"profile-pic-upload mb-3\">\r\n                      <!-- Add Image -->\r\n                      <div v-if=\"!newUser.image.url\" class=\"profile-pic brand-pic\" @click=\"triggerFileInput('new')\">\r\n                        <input id=\"new-User-file-input\" type=\"file\" @change=\"onFileChange('new', $event)\" hidden />\r\n                        <span><i data-feather=\"plus-circle\" class=\"plus-down-add\"></i> Add Image</span>\r\n                      </div>\r\n\r\n                      <!-- Image Preview -->\r\n                      <div class=\"phone-img\" v-else>\r\n                        <div class=\"image-preview-wrapper\">\r\n                          <img :src=\"newUser.image.url\" alt=\"Uploaded image\" class=\"image-preview\" />\r\n                          <a @click=\"removeImage('new')\" class=\"remove-image-btn\">\r\n                            <font-awesome-icon icon=\"xmark\" style=\"color: #ffffff;\" class=\"mx-2\" />\r\n                          </a>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div class=\"col-lg-6\">\r\n                    <div class=\"input-blocks\">\r\n                      <label>First Name</label>\r\n                      <input type=\"text\" class=\"form-control\" v-model=\"newUser.firstName\" />\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"col-lg-6\">\r\n                    <div class=\"input-blocks\">\r\n                      <label>Last Name</label>\r\n                      <input type=\"text\" class=\"form-control\" v-model=\"newUser.lastName\" />\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"col-lg-6\">\r\n                    <div class=\"input-blocks\">\r\n                      <label>Phone</label>\r\n                      <input type=\"text\" class=\"form-control\" v-model=\"newUser.phone\" />\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"col-lg-6\">\r\n                    <div class=\"input-blocks\">\r\n                      <label>Email</label>\r\n                      <input type=\"email\" class=\"form-control\" v-model=\"newUser.email\" />\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"col-lg-6\">\r\n                    <div class=\"input-blocks\">\r\n                      <label>Birthdate</label>\r\n                      <input type=\"date\" class=\"form-control\" v-model=\"newUser.birthdate\" />\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"col-lg-6\">\r\n                    <div class=\"input-blocks\">\r\n                      <label>Role</label>\r\n                      <select class=\"form-control\" v-model=\"newUser.role\">\r\n                        <option value=\"Admin\">Admin</option>\r\n                        <option value=\"Cashier\">Cashier</option>\r\n                      </select>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"col-lg-6\">\r\n                    <div class=\"input-blocks\">\r\n                      <label>Password</label>\r\n                      <div class=\"pass-group\">\r\n                        <input type=\"password\" id=\"add-password\" class=\"pass-input\" v-model=\"newUser.password\" />\r\n                        <span class=\"fas toggle-password fa-eye-slash\"></span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"col-lg-6\">\r\n                    <div class=\"input-blocks\">\r\n                      <label>Confirm Password</label>\r\n                      <div class=\"pass-group\">\r\n                        <input type=\"password\" id=\"add-conf-password\" class=\"pass-input\"\r\n                          v-model=\"newUser.confPassword\" />\r\n                        <span class=\"fas toggle-password fa-eye-slash\"></span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div class=\"modal-footer-btn\">\r\n                  <button type=\"button\" class=\"btn btn-cancel me-2\" data-bs-dismiss=\"modal\">\r\n                    Cancel\r\n                  </button>\r\n                  <button type=\"submit\" class=\"btn btn-submit\">Submit</button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n\r\n  <div class=\"modal fade\" id=\"edit-users\">\r\n    <div class=\"modal-dialog modal-dialog-centered custom-modal-two\">\r\n      <div class=\"modal-content\">\r\n        <div class=\"page-wrapper-new p-0\">\r\n          <div class=\"content\">\r\n            <div class=\"modal-header border-0 custom-modal-header\">\r\n              <div class=\"page-title\">\r\n                <h4 class=\"status-wrapper\">\r\n    Edit User \r\n    <span class=\"status-container\">\r\n      <span class=\"status-indicator\" :class=\"isOnline\"></span>\r\n      <span class=\"status-text\">{{ editUser.status }}</span>\r\n    </span>\r\n  </h4>\r\n               \r\n              </div>\r\n              <button type=\"button\" class=\"close\" data-bs-dismiss=\"modal\" aria-label=\"Close\">\r\n                <span aria-hidden=\"true\">&times;</span>\r\n              </button>\r\n            </div>\r\n            <div class=\"modal-body custom-modal-body new-employee-field\">\r\n              <p style=\"font-size: 10px;\">\r\n                Last Login: {{ new Date(editUser.login).toLocaleString() }} <br>\r\n                Last Logout: {{ new Date(editUser.logout).toLocaleString() }}\r\n              </p>\r\n              <form @submit.prevent=\"addUser\">\r\n                <div class=\"row\">\r\n                  <div class=\"col-lg-12\">\r\n\r\n                    <div class=\"row\">\r\n                      <div class=\"col-6\">\r\n                        <label class=\"form-label\">User Profile</label>\r\n\r\n                        <div class=\"profile-pic-upload mb-3\">\r\n                          <!-- Add Image -->\r\n                          <div v-if=\"!editUser.image.url\" class=\"profile-pic brand-pic\"\r\n                            @click=\"triggerFileInput('edit')\">\r\n                            <input id=\"edit-User-file-input\" type=\"file\" @change=\"onFileChange('edit', $event)\"\r\n                              hidden />\r\n                            <span><i data-feather=\"plus-circle\" class=\"plus-down-add\"></i> Add Image</span>\r\n                          </div>\r\n\r\n                          <!-- Image Preview -->\r\n                          <div class=\"phone-img\" v-else>\r\n                            <div class=\"image-preview-wrapper\">\r\n                              <img :src=\"editUser.image.url\" alt=\"Uploaded image\" class=\"image-preview\" />\r\n                              <a @click=\"removeImage('edit')\" class=\"remove-image-btn\">\r\n                                <font-awesome-icon icon=\"xmark\" style=\"color: #ffffff;\" class=\"mx-2\" />\r\n                              </a>\r\n                            </div>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                      <div class=\"col-5\">\r\n                        <p class=\"form-label\">Set User Status to:</p>\r\n                        <div class=\"status-toggle modal-status d-flex justify-content-between align-items-center\">\r\n                          <span>{{ editUser.userStatus }}</span>\r\n                          <input type=\"checkbox\" id=\"add-category-status\" class=\"check\" v-model=\"editUser.userStatus\"\r\n                            :true-value=\"'Enabled'\" :false-value=\"'Disabled'\" />\r\n                          <label for=\"add-category-status\" class=\"checktoggle\"></label>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"col-lg-6\">\r\n                    <div class=\"input-blocks\">\r\n                      <label>First Name</label>\r\n                      <input type=\"text\" class=\"form-control\" v-model=\"editUser.firstName\" />\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"col-lg-6\">\r\n                    <div class=\"input-blocks\">\r\n                      <label>Last Name</label>\r\n                      <input type=\"text\" class=\"form-control\" v-model=\"editUser.lastName\" />\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"col-lg-6\">\r\n                    <div class=\"input-blocks\">\r\n                      <label>Phone</label>\r\n                      <input type=\"text\" class=\"form-control\" v-model=\"editUser.phone\" />\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"col-lg-6\">\r\n                    <div class=\"input-blocks\">\r\n                      <label>Email</label>\r\n                      <input type=\"email\" class=\"form-control\" v-model=\"editUser.email\" />\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"col-lg-6\">\r\n                    <div class=\"input-blocks\">\r\n                      <label>Birthdate</label>\r\n                      <input type=\"date\" class=\"form-control\" v-model=\"editUser.birthdate\" />\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"col-lg-6\">\r\n                    <div class=\"input-blocks\">\r\n                      <label>Role</label>\r\n                      <select class=\"form-control\" v-model=\"editUser.role\">\r\n                        <option value=\"Admin\">Admin</option>\r\n                        <option value=\"Cashier\">Cashier</option>\r\n                      </select>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"col-lg-6\">\r\n                    <div class=\"input-blocks\">\r\n                      <label>Password</label>\r\n                      <div class=\"pass-group\">\r\n                        <input type=\"password\" id=\"add-password\" class=\"pass-input\" v-model=\"editUser.password\" />\r\n                        <span class=\"fas toggle-password fa-eye-slash\"></span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"col-lg-6\">\r\n                    <div class=\"input-blocks\">\r\n                      <label>Confirm Password</label>\r\n                      <div class=\"pass-group\">\r\n                        <input type=\"password\" id=\"add-conf-password\" class=\"pass-input\"\r\n                          v-model=\"editUser.confPassword\" />\r\n                        <span class=\"fas toggle-password fa-eye-slash\"></span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div class=\"modal-footer-btn\">\r\n                  <button type=\"button\" class=\"btn btn-cancel me-2\" data-bs-dismiss=\"modal\">\r\n                    Cancel\r\n                  </button>\r\n                  <button type=\"submit\" class=\"btn btn-submit\">Submit</button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n\r\n\r\n</template>\r\n<script>\r\nimport { ref, onMounted, nextTick } from 'vue';\r\nimport { modalController } from '@/utils/modalController';\r\nimport 'select2';\r\nimport feather from 'feather-icons';\r\nimport Swal from 'sweetalert2';\r\nimport Navbar from '/src/components/Admin/Navbar.vue';\r\nimport ClipLoader from 'vue-spinner/src/ClipLoader.vue';\r\nimport $ from 'jquery';\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  components: {\r\n    Navbar,\r\n    ClipLoader\r\n  },\r\n  setup() {\r\n    const apiURL = process.env.VUE_APP_URL;\r\n    const imageURL = process.env.VUE_APP_IMAGE_URL;\r\n    const users = ref([]);\r\n    const loading = ref(false);\r\n    const isOnline = ref('Online')\r\n\r\n\r\n    const newUser = ref({\r\n      firstName: '',\r\n      lastName: '',\r\n      phone: '',\r\n      email: '',\r\n      birthdate: '',\r\n      role: 'Cashier',\r\n      password: '',\r\n      confPassword: '',\r\n      image: { file: null, url: null },\r\n    });\r\n    const editUser = ref({\r\n      _id: '',\r\n      firstName: '',\r\n      lastName: '',\r\n      phone: '',\r\n      email: '',\r\n      birthdate: '',\r\n      role: '',\r\n      password: '',\r\n      confPassword: '',\r\n      status: '',\r\n      login: '',\r\n      logout: '',\r\n      image: { file: null, url: null },\r\n      userStatus: 'Disabled',\r\n      isImageRemoved: false,\r\n    });\r\n\r\n    const triggerFileInput = (User) => {\r\n            if (User === 'new') {\r\n                document.querySelector('#new-User-file-input').click();\r\n            } else if (User === 'edit') {\r\n                document.querySelector('#edit-User-file-input').click();\r\n            }\r\n        };\r\n\r\n        const onFileChange = (User, event) => {\r\n            const file = event.target.files[0];\r\n            if (file) {\r\n                const imageData = { file, url: URL.createObjectURL(file) };\r\n                if (User === 'new') {\r\n                    newUser.value.image = imageData;\r\n                } else if (User === 'edit') {\r\n                    editUser.value.image = imageData;\r\n                }\r\n            }\r\n        };\r\n\r\n        const removeImage = (User) => {\r\n            if (User === 'new') {\r\n                newUser.value.image = { file: null, url: null };\r\n            } else if (User === 'edit') {\r\n                editUser.value.image = { file: null, url: null };\r\n                editUser.value.isimageRemoved = true;\r\n            }\r\n            console.log(editUser.value.image)\r\n        };\r\n\r\n    const initializeDataTable = () => {\r\n      const tableElement = $('#user-table');\r\n      if ($.fn.DataTable.isDataTable(tableElement)) {\r\n        tableElement.DataTable().destroy();\r\n      }\r\n      tableElement.DataTable({\r\n        searching: true,\r\n        paging: true,\r\n        info: true,\r\n        responsive: true,\r\n      });\r\n    };\r\n\r\n    const refreshDataTable = () => {\r\n      const table = $('#user-table').DataTable();\r\n      table.destroy();\r\n      initializeDataTable();\r\n    };\r\n\r\n    const getUsers = async () => {\r\n      try {\r\n        loading.value = true;\r\n        const response = await axios.get(`${apiURL}/get_all_users`);\r\n        users.value = response.data.users;\r\n\r\n        this.$nextTick(() => refreshDataTable());\r\n      } catch (error) {\r\n        console.error('Error fetching users:', error.message);\r\n      } finally {\r\n        loading.value = false;\r\n      }\r\n    };\r\n\r\n    const addUser = async () => {\r\n\r\n\r\n      if (newUser.value.password !== newUser.value.confPassword) {\r\n        Swal.fire('Error', 'Passwords do not match', 'error');\r\n        return;\r\n      }\r\n\r\n      const formData = new FormData();\r\n      formData.append('firstName', newUser.value.firstName);  // Ensure firstName is not empty\r\n      formData.append('lastName', newUser.value.lastName);    // Ensure lastName is not empty\r\n      formData.append('email', newUser.value.email);          // Ensure email is not empty\r\n      formData.append('phone', newUser.value.phone);          // Ensure phone is not empty\r\n      formData.append('birthdate', newUser.value.birthdate);  // Ensure birthdate is not empty\r\n      formData.append('role', newUser.value.role);            // Ensure role is not empty\r\n      formData.append('password', newUser.value.password);    // Ensure password is not empty\r\n      if ( newUser.value.image.file) {\r\n        formData.append('image', newUser.value.image.file);\r\n      }\r\n\r\n\r\n      try {\r\n        const response = await axios.post(`${apiURL}/add_user`, formData, {\r\n          headers: { 'Content-Type': 'multipart/form-data' },\r\n        });\r\n\r\n        if (response.data.success) {\r\n          Swal.fire('Success', 'User added successfully!', 'success');\r\n          document.querySelector('#add-users .btn-cancel').click();\r\n\r\n        } else {\r\n          Swal.fire('Error', response.data.error, 'error');\r\n          document.querySelector('#add-users .btn-cancel').click();\r\n        }\r\n\r\n\r\n      } catch (error) {\r\n        console.error('Error adding user:', error.message);\r\n        console.error('Error adding user:', error.response.data.message || error.message);\r\n      } finally {\r\n        getUsers();\r\n      }\r\n    };\r\n\r\n    const openEditModal = async (id) => {\r\n      const response = await axios.get(`${apiURL}/get_user/${id}`);\r\n      const user = response.data.user;\r\n      editUser.value = {\r\n        _id: user._id,\r\n        firstName: user.firstName,\r\n        lastName: user.lastName,\r\n        phone: user.phone,\r\n        email: user.email,\r\n        birthdate: user.birthdate,\r\n        role: user.role,\r\n        status: user.status,\r\n        login: user.login,\r\n        logout: user.logout,\r\n        image: { file: null, url: `${imageURL}${user.image}` },\r\n        userStatus: user.userStatus || 'Disabled'\r\n      };\r\n      isOnline.value = user.status;\r\n    };\r\n\r\n    onMounted(async () => {\r\n      await getUsers();\r\n      feather.replace();\r\n      initializeDataTable();\r\n    });\r\n\r\n    return {\r\n      users,\r\n      addUser,\r\n      newUser,\r\n      loading,\r\n      removeImage,\r\n      onFileChange,\r\n      triggerFileInput,\r\n      openEditModal,\r\n      editUser,\r\n      imageURL,\r\n      isOnline\r\n\r\n    };\r\n  },\r\n};\r\n</script>\r\n<style scoped>\r\n.profile-pic-upload {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.profile-pic.brand-pic {\r\n  width: 120px;\r\n  /* Set width for the add image button */\r\n  height: 120px;\r\n  /* Set height to match the image preview */\r\n  background-color: #f1f1f1;\r\n  /* Optional: Add background color */\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  cursor: pointer;\r\n  border-radius: 8px;\r\n  border: 1px solid #ddd;\r\n  /* Optional: Add border */\r\n}\r\n\r\n.image-preview-wrapper {\r\n  position: relative;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  width: 120px;\r\n  /* Same width as the add image button */\r\n  height: 120px;\r\n  /* Same height as the add image button */\r\n}\r\n\r\n.image-preview {\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: cover;\r\n  /* Ensure the image covers the area while maintaining its aspect ratio */\r\n  border-radius: 8px;\r\n  /* Optional: Add border radius */\r\n}\r\n\r\n.remove-image-btn {\r\n  position: absolute;\r\n  top: 5px;\r\n  right: 5px;\r\n  background-color: rgb(228, 0, 0);\r\n  /* Optional: Dark background for the close button */\r\n  padding: 1px;\r\n\r\n  z-index: 10;\r\n}\r\n.status-wrapper {\r\n  display: flex;\r\n  align-items: center;\r\n  font-size: 18px;\r\n}\r\n.status-text {\r\n  font-weight: normal; /* Ensures the status text is normal weight */\r\n}\r\n.status-container {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-left: 8px; /* Adds space between \"Edit User\" and status */\r\n}\r\n\r\n.status-indicator {\r\n  width: 12px;\r\n  height: 12px;\r\n  border-radius: 50%;\r\n  margin-right: 8px; /* Adds space between indicator and text */\r\n}\r\n\r\n.Online {\r\n  background-color: #28a745; /* Green for Online */\r\n}\r\n\r\n.Offline {\r\n  background-color: #dc3545; /* Red for Offline */\r\n}\r\n</style>"],"mappings":";;;AAwUA,SAASA,GAAG,EAAEC,SAAS,EAAEC,QAAO,QAAS,KAAK;AAC9C,SAASC,eAAc,QAAS,yBAAyB;AACzD,OAAO,SAAS;AAChB,OAAOC,OAAM,MAAO,eAAe;AACnC,OAAOC,IAAG,MAAO,aAAa;AAC9B,OAAOC,MAAK,MAAO,kCAAkC;AACrD,OAAOC,UAAS,MAAO,gCAAgC;AACvD,OAAOC,CAAA,MAAO,QAAQ;AACtB,OAAOC,KAAI,MAAO,OAAO;AAEzB,eAAe;EACbC,UAAU,EAAE;IACVJ,MAAM;IACNC;EACF,CAAC;EACDI,KAAKA,CAAA,EAAG;IACN,MAAMC,MAAK,GAAIC,OAAO,CAACC,GAAG,CAACC,WAAW;IACtC,MAAMC,QAAO,GAAIH,OAAO,CAACC,GAAG,CAACG,iBAAiB;IAC9C,MAAMC,KAAI,GAAIlB,GAAG,CAAC,EAAE,CAAC;IACrB,MAAMmB,OAAM,GAAInB,GAAG,CAAC,KAAK,CAAC;IAC1B,MAAMoB,QAAO,GAAIpB,GAAG,CAAC,QAAQ;IAG7B,MAAMqB,OAAM,GAAIrB,GAAG,CAAC;MAClBsB,SAAS,EAAE,EAAE;MACbC,QAAQ,EAAE,EAAE;MACZC,KAAK,EAAE,EAAE;MACTC,KAAK,EAAE,EAAE;MACTC,SAAS,EAAE,EAAE;MACbC,IAAI,EAAE,SAAS;MACfC,QAAQ,EAAE,EAAE;MACZC,YAAY,EAAE,EAAE;MAChBC,KAAK,EAAE;QAAEC,IAAI,EAAE,IAAI;QAAEC,GAAG,EAAE;MAAK;IACjC,CAAC,CAAC;IACF,MAAMC,QAAO,GAAIjC,GAAG,CAAC;MACnBkC,GAAG,EAAE,EAAE;MACPZ,SAAS,EAAE,EAAE;MACbC,QAAQ,EAAE,EAAE;MACZC,KAAK,EAAE,EAAE;MACTC,KAAK,EAAE,EAAE;MACTC,SAAS,EAAE,EAAE;MACbC,IAAI,EAAE,EAAE;MACRC,QAAQ,EAAE,EAAE;MACZC,YAAY,EAAE,EAAE;MAChBM,MAAM,EAAE,EAAE;MACVC,KAAK,EAAE,EAAE;MACTC,MAAM,EAAE,EAAE;MACVP,KAAK,EAAE;QAAEC,IAAI,EAAE,IAAI;QAAEC,GAAG,EAAE;MAAK,CAAC;MAChCM,UAAU,EAAE,UAAU;MACtBC,cAAc,EAAE;IAClB,CAAC,CAAC;IAEF,MAAMC,gBAAe,GAAKC,IAAI,IAAK;MAC3B,IAAIA,IAAG,KAAM,KAAK,EAAE;QAChBC,QAAQ,CAACC,aAAa,CAAC,sBAAsB,CAAC,CAACC,KAAK,CAAC,CAAC;MAC1D,OAAO,IAAIH,IAAG,KAAM,MAAM,EAAE;QACxBC,QAAQ,CAACC,aAAa,CAAC,uBAAuB,CAAC,CAACC,KAAK,CAAC,CAAC;MAC3D;IACJ,CAAC;IAED,MAAMC,YAAW,GAAIA,CAACJ,IAAI,EAAEK,KAAK,KAAK;MAClC,MAAMf,IAAG,GAAIe,KAAK,CAACC,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;MAClC,IAAIjB,IAAI,EAAE;QACN,MAAMkB,SAAQ,GAAI;UAAElB,IAAI;UAAEC,GAAG,EAAEkB,GAAG,CAACC,eAAe,CAACpB,IAAI;QAAE,CAAC;QAC1D,IAAIU,IAAG,KAAM,KAAK,EAAE;UAChBpB,OAAO,CAAC+B,KAAK,CAACtB,KAAI,GAAImB,SAAS;QACnC,OAAO,IAAIR,IAAG,KAAM,MAAM,EAAE;UACxBR,QAAQ,CAACmB,KAAK,CAACtB,KAAI,GAAImB,SAAS;QACpC;MACJ;IACJ,CAAC;IAED,MAAMI,WAAU,GAAKZ,IAAI,IAAK;MAC1B,IAAIA,IAAG,KAAM,KAAK,EAAE;QAChBpB,OAAO,CAAC+B,KAAK,CAACtB,KAAI,GAAI;UAAEC,IAAI,EAAE,IAAI;UAAEC,GAAG,EAAE;QAAK,CAAC;MACnD,OAAO,IAAIS,IAAG,KAAM,MAAM,EAAE;QACxBR,QAAQ,CAACmB,KAAK,CAACtB,KAAI,GAAI;UAAEC,IAAI,EAAE,IAAI;UAAEC,GAAG,EAAE;QAAK,CAAC;QAChDC,QAAQ,CAACmB,KAAK,CAACE,cAAa,GAAI,IAAI;MACxC;MACAC,OAAO,CAACC,GAAG,CAACvB,QAAQ,CAACmB,KAAK,CAACtB,KAAK;IACpC,CAAC;IAEL,MAAM2B,mBAAkB,GAAIA,CAAA,KAAM;MAChC,MAAMC,YAAW,GAAIlD,CAAC,CAAC,aAAa,CAAC;MACrC,IAAIA,CAAC,CAACmD,EAAE,CAACC,SAAS,CAACC,WAAW,CAACH,YAAY,CAAC,EAAE;QAC5CA,YAAY,CAACE,SAAS,CAAC,CAAC,CAACE,OAAO,CAAC,CAAC;MACpC;MACAJ,YAAY,CAACE,SAAS,CAAC;QACrBG,SAAS,EAAE,IAAI;QACfC,MAAM,EAAE,IAAI;QACZC,IAAI,EAAE,IAAI;QACVC,UAAU,EAAE;MACd,CAAC,CAAC;IACJ,CAAC;IAED,MAAMC,gBAAe,GAAIA,CAAA,KAAM;MAC7B,MAAMC,KAAI,GAAI5D,CAAC,CAAC,aAAa,CAAC,CAACoD,SAAS,CAAC,CAAC;MAC1CQ,KAAK,CAACN,OAAO,CAAC,CAAC;MACfL,mBAAmB,CAAC,CAAC;IACvB,CAAC;IAED,MAAMY,QAAO,GAAI,MAAAA,CAAA,KAAY;MAC3B,IAAI;QACFlD,OAAO,CAACiC,KAAI,GAAI,IAAI;QACpB,MAAMkB,QAAO,GAAI,MAAM7D,KAAK,CAAC8D,GAAG,CAAC,GAAG3D,MAAM,gBAAgB,CAAC;QAC3DM,KAAK,CAACkC,KAAI,GAAIkB,QAAQ,CAACE,IAAI,CAACtD,KAAK;QAEjC,IAAI,CAACuD,SAAS,CAAC,MAAMN,gBAAgB,CAAC,CAAC,CAAC;MAC1C,EAAE,OAAOO,KAAK,EAAE;QACdnB,OAAO,CAACmB,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAACC,OAAO,CAAC;MACvD,UAAU;QACRxD,OAAO,CAACiC,KAAI,GAAI,KAAK;MACvB;IACF,CAAC;IAED,MAAMwB,OAAM,GAAI,MAAAA,CAAA,KAAY;MAG1B,IAAIvD,OAAO,CAAC+B,KAAK,CAACxB,QAAO,KAAMP,OAAO,CAAC+B,KAAK,CAACvB,YAAY,EAAE;QACzDxB,IAAI,CAACwE,IAAI,CAAC,OAAO,EAAE,wBAAwB,EAAE,OAAO,CAAC;QACrD;MACF;MAEA,MAAMC,QAAO,GAAI,IAAIC,QAAQ,CAAC,CAAC;MAC/BD,QAAQ,CAACE,MAAM,CAAC,WAAW,EAAE3D,OAAO,CAAC+B,KAAK,CAAC9B,SAAS,CAAC,EAAG;MACxDwD,QAAQ,CAACE,MAAM,CAAC,UAAU,EAAE3D,OAAO,CAAC+B,KAAK,CAAC7B,QAAQ,CAAC,EAAK;MACxDuD,QAAQ,CAACE,MAAM,CAAC,OAAO,EAAE3D,OAAO,CAAC+B,KAAK,CAAC3B,KAAK,CAAC,EAAW;MACxDqD,QAAQ,CAACE,MAAM,CAAC,OAAO,EAAE3D,OAAO,CAAC+B,KAAK,CAAC5B,KAAK,CAAC,EAAW;MACxDsD,QAAQ,CAACE,MAAM,CAAC,WAAW,EAAE3D,OAAO,CAAC+B,KAAK,CAAC1B,SAAS,CAAC,EAAG;MACxDoD,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAE3D,OAAO,CAAC+B,KAAK,CAACzB,IAAI,CAAC,EAAa;MACxDmD,QAAQ,CAACE,MAAM,CAAC,UAAU,EAAE3D,OAAO,CAAC+B,KAAK,CAACxB,QAAQ,CAAC,EAAK;MACxD,IAAKP,OAAO,CAAC+B,KAAK,CAACtB,KAAK,CAACC,IAAI,EAAE;QAC7B+C,QAAQ,CAACE,MAAM,CAAC,OAAO,EAAE3D,OAAO,CAAC+B,KAAK,CAACtB,KAAK,CAACC,IAAI,CAAC;MACpD;MAGA,IAAI;QACF,MAAMuC,QAAO,GAAI,MAAM7D,KAAK,CAACwE,IAAI,CAAC,GAAGrE,MAAM,WAAW,EAAEkE,QAAQ,EAAE;UAChEI,OAAO,EAAE;YAAE,cAAc,EAAE;UAAsB;QACnD,CAAC,CAAC;QAEF,IAAIZ,QAAQ,CAACE,IAAI,CAACW,OAAO,EAAE;UACzB9E,IAAI,CAACwE,IAAI,CAAC,SAAS,EAAE,0BAA0B,EAAE,SAAS,CAAC;UAC3DnC,QAAQ,CAACC,aAAa,CAAC,wBAAwB,CAAC,CAACC,KAAK,CAAC,CAAC;QAE1D,OAAO;UACLvC,IAAI,CAACwE,IAAI,CAAC,OAAO,EAAEP,QAAQ,CAACE,IAAI,CAACE,KAAK,EAAE,OAAO,CAAC;UAChDhC,QAAQ,CAACC,aAAa,CAAC,wBAAwB,CAAC,CAACC,KAAK,CAAC,CAAC;QAC1D;MAGF,EAAE,OAAO8B,KAAK,EAAE;QACdnB,OAAO,CAACmB,KAAK,CAAC,oBAAoB,EAAEA,KAAK,CAACC,OAAO,CAAC;QAClDpB,OAAO,CAACmB,KAAK,CAAC,oBAAoB,EAAEA,KAAK,CAACJ,QAAQ,CAACE,IAAI,CAACG,OAAM,IAAKD,KAAK,CAACC,OAAO,CAAC;MACnF,UAAU;QACRN,QAAQ,CAAC,CAAC;MACZ;IACF,CAAC;IAED,MAAMe,aAAY,GAAI,MAAOC,EAAE,IAAK;MAClC,MAAMf,QAAO,GAAI,MAAM7D,KAAK,CAAC8D,GAAG,CAAC,GAAG3D,MAAM,aAAayE,EAAE,EAAE,CAAC;MAC5D,MAAMC,IAAG,GAAIhB,QAAQ,CAACE,IAAI,CAACc,IAAI;MAC/BrD,QAAQ,CAACmB,KAAI,GAAI;QACflB,GAAG,EAAEoD,IAAI,CAACpD,GAAG;QACbZ,SAAS,EAAEgE,IAAI,CAAChE,SAAS;QACzBC,QAAQ,EAAE+D,IAAI,CAAC/D,QAAQ;QACvBC,KAAK,EAAE8D,IAAI,CAAC9D,KAAK;QACjBC,KAAK,EAAE6D,IAAI,CAAC7D,KAAK;QACjBC,SAAS,EAAE4D,IAAI,CAAC5D,SAAS;QACzBC,IAAI,EAAE2D,IAAI,CAAC3D,IAAI;QACfQ,MAAM,EAAEmD,IAAI,CAACnD,MAAM;QACnBC,KAAK,EAAEkD,IAAI,CAAClD,KAAK;QACjBC,MAAM,EAAEiD,IAAI,CAACjD,MAAM;QACnBP,KAAK,EAAE;UAAEC,IAAI,EAAE,IAAI;UAAEC,GAAG,EAAE,GAAGhB,QAAQ,GAAGsE,IAAI,CAACxD,KAAK;QAAG,CAAC;QACtDQ,UAAU,EAAEgD,IAAI,CAAChD,UAAS,IAAK;MACjC,CAAC;MACDlB,QAAQ,CAACgC,KAAI,GAAIkC,IAAI,CAACnD,MAAM;IAC9B,CAAC;IAEDlC,SAAS,CAAC,YAAY;MACpB,MAAMoE,QAAQ,CAAC,CAAC;MAChBjE,OAAO,CAACmF,OAAO,CAAC,CAAC;MACjB9B,mBAAmB,CAAC,CAAC;IACvB,CAAC,CAAC;IAEF,OAAO;MACLvC,KAAK;MACL0D,OAAO;MACPvD,OAAO;MACPF,OAAO;MACPkC,WAAW;MACXR,YAAY;MACZL,gBAAgB;MAChB4C,aAAa;MACbnD,QAAQ;MACRjB,QAAQ;MACRI;IAEF,CAAC;EACH;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}