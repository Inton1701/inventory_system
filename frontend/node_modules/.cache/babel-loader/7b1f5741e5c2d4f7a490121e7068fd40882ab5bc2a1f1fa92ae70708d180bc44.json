{"ast":null,"code":"import \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\nimport JsBarcode from 'jsbarcode';\nimport { ref, onMounted, watch } from 'vue';\nexport default {\n  props: {\n    sku: {\n      type: String,\n      required: true\n    },\n    productName: {\n      type: String,\n      default: 'Product Name'\n    }\n  },\n  setup(props) {\n    const svgRef = ref(null);\n    const generateBarcode = sku => {\n      if (sku.length === 13) {\n        JsBarcode(svgRef.value, sku, {\n          format: 'EAN13',\n          lineColor: '#000',\n          width: 2,\n          height: 50,\n          displayValue: true\n        });\n      }\n    };\n    const downloadBarcode = () => {\n      const svg = svgRef.value;\n      const canvas = document.createElement('canvas');\n      const ctx = canvas.getContext('2d');\n      const svgData = new XMLSerializer().serializeToString(svg);\n      const img = new Image();\n      const svgBlob = new Blob([svgData], {\n        type: 'image/svg+xml;charset=utf-8'\n      });\n      const url = URL.createObjectURL(svgBlob);\n      img.onload = () => {\n        canvas.width = img.width;\n        canvas.height = img.height + 20; // extra space for product name\n        ctx.fillStyle = 'white';\n        ctx.fillRect(0, 0, canvas.width, canvas.height);\n        ctx.drawImage(img, 0, 0);\n        ctx.font = '16px Arial';\n        ctx.fillStyle = 'black';\n        ctx.textAlign = 'center';\n        ctx.fillText(props.productName, canvas.width / 2, img.height + 20);\n        const pngUrl = canvas.toDataURL('image/png');\n        const link = document.createElement('a');\n        link.href = pngUrl;\n        link.download = `${props.sku}_barcode.png`;\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n        URL.revokeObjectURL(url);\n      };\n      img.src = url;\n    };\n    onMounted(() => generateBarcode(props.sku));\n    watch(() => props.sku, newSku => generateBarcode(newSku));\n    return {\n      svgRef,\n      downloadBarcode\n    };\n  }\n};","map":{"version":3,"names":["JsBarcode","ref","onMounted","watch","props","sku","type","String","required","productName","default","setup","svgRef","generateBarcode","length","value","format","lineColor","width","height","displayValue","downloadBarcode","svg","canvas","document","createElement","ctx","getContext","svgData","XMLSerializer","serializeToString","img","Image","svgBlob","Blob","url","URL","createObjectURL","onload","fillStyle","fillRect","drawImage","font","textAlign","fillText","pngUrl","toDataURL","link","href","download","body","appendChild","click","removeChild","revokeObjectURL","src","newSku"],"sources":["C:\\Users\\Administrator\\OneDrive\\Desktop\\POSExpress\\frontend\\src\\components\\Admin\\Inventory\\Barcode.vue"],"sourcesContent":["<script>\r\nimport JsBarcode from 'jsbarcode';\r\nimport { ref, onMounted, watch } from 'vue';\r\n\r\nexport default {\r\n  props: {\r\n    sku: {\r\n      type: String,\r\n      required: true\r\n    },\r\n    productName: {\r\n      type: String,\r\n      default: 'Product Name'\r\n    }\r\n  },\r\n  setup(props) {\r\n    const svgRef = ref(null);\r\n\r\n    const generateBarcode = (sku) => {\r\n      if (sku.length === 13) {\r\n        JsBarcode(svgRef.value, sku, {\r\n          format: 'EAN13',\r\n          lineColor: '#000',\r\n          width: 2,\r\n          height: 50,\r\n          displayValue: true\r\n        });\r\n      }\r\n    };\r\n\r\n    const downloadBarcode = () => {\r\n      const svg = svgRef.value;\r\n      const canvas = document.createElement('canvas');\r\n      const ctx = canvas.getContext('2d');\r\n      const svgData = new XMLSerializer().serializeToString(svg);\r\n      const img = new Image();\r\n      const svgBlob = new Blob([svgData], { type: 'image/svg+xml;charset=utf-8' });\r\n      const url = URL.createObjectURL(svgBlob);\r\n\r\n      img.onload = () => {\r\n        canvas.width = img.width;\r\n        canvas.height = img.height + 20; // extra space for product name\r\n        ctx.fillStyle = 'white';\r\n        ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n        ctx.drawImage(img, 0, 0);\r\n        ctx.font = '16px Arial';\r\n        ctx.fillStyle = 'black';\r\n        ctx.textAlign = 'center';\r\n        ctx.fillText(props.productName, canvas.width / 2, img.height + 20);\r\n\r\n        const pngUrl = canvas.toDataURL('image/png');\r\n        const link = document.createElement('a');\r\n        link.href = pngUrl;\r\n        link.download = `${props.sku}_barcode.png`;\r\n        document.body.appendChild(link);\r\n        link.click();\r\n        document.body.removeChild(link);\r\n        URL.revokeObjectURL(url);\r\n      };\r\n      img.src = url;\r\n    };\r\n\r\n    onMounted(() => generateBarcode(props.sku));\r\n    watch(() => props.sku, (newSku) => generateBarcode(newSku));\r\n\r\n    return {\r\n      svgRef,\r\n      downloadBarcode\r\n    };\r\n  }\r\n};\r\n</script>\r\n<template>\r\n  <div>\r\n    <div v-if=\"errorMessage\" class=\"error-message\">{{ errorMessage }}</div>\r\n\r\n    <svg ref=\"svgRef\"></svg>\r\n    <button @click=\"downloadBarcode\">Download Barcode as PNG</button>\r\n  </div>\r\n</template>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}