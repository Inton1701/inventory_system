{"ast":null,"code":"import \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\nimport { ref, onMounted, onBeforeUnmount } from 'vue';\nimport 'select2';\nimport feather from 'feather-icons';\nimport Sidebar from '/src/components/Admin/Sidebar.vue';\nimport Navbar from '/src/components/Admin/Navbar.vue';\nexport default {\n  components: {\n    Sidebar,\n    Navbar\n  },\n  data() {\n    return {\n      sku: '',\n      // Product SKU\n      productName: '',\n      // Product name\n      productDescription: '',\n      // Product description\n      image: {\n        url: ''\n      },\n      // Image data\n      price: '',\n      // Price\n      cost: '',\n      // Cost\n      discountType: 'None',\n      // Discount type (None, Percent, Fixed)\n      discountValue: '',\n      // Discount value\n      unit: 'None',\n      // Unit\n      category: 'None',\n      // Category\n      subCategory: 'None',\n      // Sub-category\n      brand: 'None',\n      // Brand\n      manufacturedDate: '',\n      // Manufacturing date\n      expiryDate: '',\n      // Expiry date\n      variantAttributes: '',\n      status: '' // Status\n    };\n  },\n  setup() {\n    const select = ref('.select');\n    onMounted(async () => {\n      try {\n        // Initialize the select2 plugin\n        await $(select.value).select2();\n        // Initialize the feather icons\n        await feather.replace();\n      } catch (error) {\n        console.log(error);\n      }\n    });\n    onBeforeUnmount(() => {\n      // Destroy the select2 plugin to avoid memory leaks when component is unmounted\n      $(select.value).select2('destroy');\n    });\n    return {\n      select\n    };\n  },\n  methods: {\n    filterTextInput(value) {\n      return value.replace(/[^a-zA-Z0-9.\\-() ]/g, '');\n    },\n    // Allow only numbers and dots\n    filterNumInput(value) {\n      return value.replace(/[^0-9.]/g, '');\n    },\n    generateEAN13() {\n      let digits = '';\n      for (let i = 0; i < 12; i++) {\n        digits += Math.floor(Math.random() * 10).toString();\n      }\n      let sumOdd = 0;\n      let sumEven = 0;\n      for (let i = 0; i < 12; i++) {\n        const digit = parseInt(digits[i], 10);\n        if (i % 2 === 0) {\n          sumOdd += digit;\n        } else {\n          sumEven += digit;\n        }\n      }\n      const totalSum = sumOdd + sumEven * 3;\n      const checksum = (10 - totalSum % 10) % 10;\n\n      // Return the complete EAN-13 code\n      return digits + checksum;\n    },\n    autoGenerateSKU() {\n      this.sku = this.generateEAN13(); // Set sku to generated EAN-13\n    },\n    checkSubmit(event) {\n      if (!this.canSubmit) {\n        event.preventDefault();\n      } else {\n        console.log('Form submitted');\n      }\n    },\n    onFileChange(event) {\n      const file = event.target.files[0];\n      if (file) {\n        // Create a URL for the uploaded file\n        this.image = {\n          file: file,\n          url: URL.createObjectURL(file)\n        };\n        // Re-render Feather icons after the image URL is set\n        this.$nextTick(() => {\n          window.feather.replace();\n        });\n      }\n    },\n    // Removes the uploaded image and resets the image data\n    removeImage() {\n      this.image = {\n        file: null,\n        url: null\n      };\n    },\n    async addProduct() {\n      try {\n        // Prepare the form data\n        const formData = new FormData();\n        formData.append('sku', this.sku);\n        formData.append('productName', this.productName);\n        formData.append('productDescription', this.productDescription);\n        formData.append('price', this.price);\n        formData.append('cost', this.cost);\n        formData.append('discountType', this.discountType);\n        formData.append('discountValue', this.discountValue);\n        formData.append('unit', this.unit);\n        formData.append('category', this.category);\n        formData.append('subCategory', this.subCategory);\n        formData.append('brand', this.brand);\n        formData.append('manufacturedDate', this.manufacturedDate);\n        formData.append('expiryDate', this.expiryDate);\n        formData.append('variantAttributes', JSON.stringify(this.variantAttributes));\n        formData.append('status', this.status);\n        append('status', this.status);\n\n        // Attach the image if available\n        if (this.image.file) {\n          formData.append('image', this.image.file);\n        }\n\n        // Send the request to add the product\n        const response = await axios.post('http://localhost:5000/api/add_products', formData, {\n          headers: {\n            'Content-Type': 'multipart/form-data'\n          }\n        });\n\n        // Handle the response (success feedback or redirect)\n        if (response.data.success === true) {\n          alert('Product added successfully!');\n        } else if (response.data.success === false) {\n          alert(`Failed to add product: ${response.data.message}`);\n        } else {\n          alert('Unexpected response status.');\n        }\n      } catch (error) {\n        console.error('Error adding product:', error);\n        alert('An error occurred. Please try again.');\n      }\n    },\n    watch: {\n      checkLength(value, length) {\n        if (value.length != length) {}\n      }\n    },\n    mouted() {\n      feather.replace();\n    }\n  }\n};","map":{"version":3,"names":["ref","onMounted","onBeforeUnmount","feather","Sidebar","Navbar","components","data","sku","productName","productDescription","image","url","price","cost","discountType","discountValue","unit","category","subCategory","brand","manufacturedDate","expiryDate","variantAttributes","status","setup","select","$","value","select2","replace","error","console","log","methods","filterTextInput","filterNumInput","generateEAN13","digits","i","Math","floor","random","toString","sumOdd","sumEven","digit","parseInt","totalSum","checksum","autoGenerateSKU","checkSubmit","event","canSubmit","preventDefault","onFileChange","file","target","files","URL","createObjectURL","$nextTick","window","removeImage","addProduct","formData","FormData","append","JSON","stringify","response","axios","post","headers","success","alert","message","watch","checkLength","length","mouted"],"sources":["C:\\Users\\Administrator\\OneDrive\\Desktop\\POSExpress\\frontend\\src\\components\\Admin\\Inventory\\CreateProduct.vue"],"sourcesContent":["<template>\r\n    <Navbar />\r\n\r\n    <div class=\"page-wrapper\">\r\n        <div class=\"content\">\r\n            <div class=\"page-header\">\r\n                <div class=\"add-item d-flex\">\r\n                    <div class=\"page-title\">\r\n                        <h4>New Product</h4>\r\n                        <h6>Create new product</h6>\r\n                    </div>\r\n                </div>\r\n                <ul class=\"table-top-head\">\r\n                    <li>\r\n                        <div class=\"page-btn\">\r\n                            <router-link to=\"products\" class=\"btn btn-secondary\"><i data-feather=\"arrow-left\"\r\n                                    class=\"me-2\"></i>Back to Product</router-link>\r\n                        </div>\r\n                    </li>\r\n                    <li>\r\n                        <a data-bs-toggle=\"tooltip\" data-bs-placement=\"top\" title=\"Collapse\" id=\"collapse-header\"><i\r\n                                data-feather=\"chevron-up\" class=\"feather-chevron-up\"></i></a>\r\n                    </li>\r\n                </ul>\r\n            </div>\r\n            <form action=\"\" @submit.prevent=\"addProduct\">\r\n  <div class=\"card\">\r\n    <div class=\"card-body add-product pb-0\">\r\n      <div class=\"accordion-card-one accordion\" id=\"accordionExample\">\r\n        <div class=\"accordion-item\">\r\n          <div class=\"accordion-header\" id=\"headingOne\">\r\n            <div class=\"accordion-button\" data-bs-toggle=\"collapse\" data-bs-target=\"#collapseOne\" aria-controls=\"collapseOne\">\r\n              <div class=\"addproduct-icon\">\r\n                <h5>\r\n                  <i data-feather=\"info\" class=\"add-info\"></i><span>Product Information</span>\r\n                </h5>\r\n                <a href=\"javascript:void(0);\"><i data-feather=\"chevron-down\" class=\"chevron-down-add\"></i></a>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div id=\"collapseOne\" class=\"accordion-collapse collapse show\" aria-labelledby=\"headingOne\" data-bs-parent=\"#accordionExample\">\r\n            <div class=\"accordion-body\">\r\n              <div class=\"row\">\r\n                <div class=\"col-lg-4 col-sm-6 col-12\">\r\n                  <div class=\"mb-3 add-product\">\r\n                    <label class=\"form-label\">Status</label>\r\n                    <div class=\"status-toggle modal-status d-flex justify-content-between\">\r\n                      <span class=\"form-label\">Active</span>\r\n                      <input type=\"checkbox\" id=\"user4\" class=\"check\" v-model=\"status\" />\r\n                      <label for=\"user4\" class=\"checktoggle\"></label>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class=\"row\">\r\n                <div class=\"col-lg-5 col-sm-6 col-12\">\r\n                  <div class=\"input-blocks add-product list\">\r\n                    <label data-bs-toggle=\"tooltip\" title=\"Note: it must be 13 numbers\">\r\n                      SKU\r\n                      <i class=\"mb-1\" data-feather=\"help-circle\" style=\"height: 15px\"></i>\r\n                    </label>\r\n                    <input type=\"text\" id=\"sku\" class=\"form-control list\" placeholder=\"Enter SKU manually\" :maxlength=\"13\" v-model=\"sku\" @input=\"sku = filterNumInput($event.target.value)\" :class=\"{ 'is-invalid': sku.length !== 13 && sku.length > 0 }\" @keydown.enter.prevent />\r\n                    <div class=\"d-flex align-items-center mt-2\">\r\n                      <button type=\"button\" class=\"btn btn-primaryadd\" @click=\"autoGenerateSKU\">Auto Generate</button>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                <div class=\"col-lg-5 col-sm-6 col-12\">\r\n                  <div class=\"mb-3 add-product\">\r\n                    <label class=\"form-label\">Product Name</label>\r\n                    <input type=\"text\" class=\"form-control\" placeholder=\"Product name here.\" :maxlength=\"60\" v-model=\"productName\" @input=\"productName = filterTextInput($event.target.value)\" />\r\n                    <p class=\"mt-1\">Maximum of 60 Characters</p>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class=\"addservice-info\">\r\n                <div class=\"row\">\r\n                  <div class=\"col-lg-4 col-sm-6 col-12\">\r\n                    <div class=\"mb-3 add-product\">\r\n                      <div class=\"add-newplus\">\r\n                        <label class=\"form-label\">Category</label>\r\n                        <a href=\"javascript:void(0);\" data-bs-toggle=\"modal\" data-bs-target=\"#add-units-category\"><i data-feather=\"plus-circle\" class=\"plus-down-add\"></i><span>Add New</span></a>\r\n                      </div>\r\n                      <select class=\"select\" v-model=\"category\">\r\n                        <option>None</option>\r\n                        <!-- Add categories dynamically here -->\r\n                      </select>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"col-lg-4 col-sm-6 col-12\">\r\n                    <div class=\"mb-3 add-product\">\r\n                      <label class=\"form-label\">Sub Category</label>\r\n                      <select class=\"select\" v-model=\"subCategory\">\r\n                        <option>None</option>\r\n                        <!-- Add subcategories dynamically here -->\r\n                      </select>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"col-lg-4 col-sm-6 col-12\">\r\n                    <div class=\"mb-3 add-product\">\r\n                      <div class=\"add-newplus\">\r\n                        <label class=\"form-label\">Brand</label>\r\n                        <a href=\"javascript:void(0);\" data-bs-toggle=\"modal\" data-bs-target=\"#add-units-brand\"><i data-feather=\"plus-circle\" class=\"plus-down-add\"></i><span>Add New</span></a>\r\n                      </div>\r\n                      <select class=\"select\" v-model=\"brand\">\r\n                        <option>None</option>\r\n                        <!-- Add brands dynamically here -->\r\n                      </select>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class=\"add-product-new\">\r\n                <div class=\"row\">\r\n                  <div class=\"col-lg-4 col-sm-6 col-12\">\r\n                    <div class=\"mb-3 add-product\">\r\n                      <div class=\"add-newplus\">\r\n                        <label class=\"form-label\">Unit</label>\r\n                        <a href=\"javascript:void(0);\" data-bs-toggle=\"modal\" data-bs-target=\"#add-unit\"><i data-feather=\"plus-circle\" class=\"plus-down-add\"></i><span>Add New</span></a>\r\n                      </div>\r\n                      <select class=\"select\" v-model=\"unit\">\r\n                        <option>None</option>\r\n                        <!-- Add units dynamically here -->\r\n                      </select>\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"col-lg-4 col-sm-6 col-12\">\r\n                    <div class=\"mb-3 add-product\">\r\n                      <label class=\"form-label\">Manufactured Date</label>\r\n                      <input type=\"date\" class=\"form-control\" v-model=\"manufacturedDate\" />\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"col-lg-4 col-sm-6 col-12\">\r\n                    <div class=\"mb-3 add-product\">\r\n                      <label class=\"form-label\">Expiry Date</label>\r\n                      <input type=\"date\" class=\"form-control\" v-model=\"expiryDate\" />\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div class=\"col-lg-12\">\r\n                <div class=\"input-blocks summer-description-box transfer mb-3\">\r\n                  <label>Description</label>\r\n                  <textarea class=\"form-control h-100\" rows=\"5\" placeholder=\"Please type here the description\" :maxlength=\"150\" v-model=\"productDescription\" @input=\"productDescription = filterTextInput($event.target.value)\"></textarea>\r\n                  <p class=\"mt-1\">Maximum of 150 Characters</p>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <!-- Product Pricing Section -->\r\n      <div class=\"accordion-card-one accordion\" id=\"accordionExample2\">\r\n        <div class=\"accordion-item\">\r\n          <div class=\"accordion-header\" id=\"headingTwo\">\r\n            <div class=\"accordion-button\" data-bs-toggle=\"collapse\" data-bs-target=\"#collapseTwo\" aria-controls=\"collapseTwo\">\r\n              <div class=\"text-editor add-list\">\r\n                <div class=\"addproduct-icon list icon\">\r\n                  <h5>\r\n                    <i data-feather=\"life-buoy\" class=\"add-info\"></i><span>Product Pricing</span>\r\n                  </h5>\r\n                  <a href=\"javascript:void(0);\"><i data-feather=\"chevron-down\" class=\"chevron-down-add\"></i></a>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div id=\"collapseTwo\" class=\"accordion-collapse collapse show\" aria-labelledby=\"headingTwo\" data-bs-parent=\"#accordionExample2\">\r\n            <div class=\"accordion-body\">\r\n              <div class=\"input-blocks add-products\">\r\n                <label class=\"d-block\">Product Type</label>\r\n                <div class=\"single-pill-product\">\r\n                  <ul class=\"nav nav-pills\" id=\"pills-tab1\" role=\"tablist\">\r\n                    <li class=\"nav-item\" role=\"presentation\">\r\n                      <span class=\"custom_radio me-4 mb-0 active\" id=\"pills-home-tab\" data-bs-toggle=\"pill\" data-bs-target=\"#pills-home\" role=\"tab\" aria-controls=\"pills-home\" aria-selected=\"true\">\r\n                        <input type=\"radio\" class=\"form-control\" name=\"payment\" v-model=\"productType\" value=\"single\" />\r\n                        <span class=\"checkmark\"></span> Single Product</span>\r\n                    </li>\r\n                    <li class=\"nav-item\" role=\"presentation\">\r\n                      <span class=\"custom_radio me-2 mb-0\" id=\"pills-profile-tab\" data-bs-toggle=\"pill\" data-bs-target=\"#pills-profile\" role=\"tab\" aria-controls=\"pills-profile\" aria-selected=\"false\">\r\n                        <input type=\"radio\" class=\"form-control\" name=\"payment\" v-model=\"productType\" value=\"variable\" />\r\n                        <span class=\"checkmark\"></span> Variable Product</span>\r\n                    </li>\r\n                  </ul>\r\n                </div>\r\n              </div>\r\n              <div class=\"row\">\r\n                <div class=\"col-lg-4 col-sm-6 col-12\">\r\n                  <div class=\"mb-3 add-product\">\r\n                    <label class=\"form-label\">Price</label>\r\n                    <input type=\"number\" class=\"form-control\" v-model=\"price\" />\r\n                  </div>\r\n                </div>\r\n                <div class=\"col-lg-4 col-sm-6 col-12\">\r\n                  <div class=\"mb-3 add-product\">\r\n                    <label class=\"form-label\">Cost</label>\r\n                    <input type=\"number\" class=\"form-control\" v-model=\"cost\" />\r\n                  </div>\r\n                </div>\r\n                <div class=\"col-lg-4 col-sm-6 col-12\">\r\n                  <div class=\"mb-3 add-product\">\r\n                    <label class=\"form-label\">Discount Type</label>\r\n                    <select class=\"form-control\" v-model=\"discountType\">\r\n                      <option value=\"none\">None</option>\r\n                      <option value=\"percent\">Percent</option>\r\n                      <option value=\"amount\">Amount</option>\r\n                    </select>\r\n                  </div>\r\n                </div>\r\n                <div class=\"col-lg-4 col-sm-6 col-12\">\r\n                  <div class=\"mb-3 add-product\">\r\n                    <label class=\"form-label\">Discount Value</label>\r\n                    <input type=\"number\" class=\"form-control\" v-model=\"discountValue\" />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <button type=\"submit\" class=\"btn btn-primary\">Add Product</button>\r\n    </div>\r\n  </div>\r\n</form>\r\n        </div>\r\n    </div>\r\n    <div class=\"modal fade\" id=\"add-units\">\r\n        <div class=\"modal-dialog modal-dialog-centered stock-adjust-modal\">\r\n            <div class=\"modal-content\">\r\n                <div class=\"page-wrapper-new p-0\">\r\n                    <div class=\"content\">\r\n                        <div class=\"modal-header border-0 custom-modal-header\">\r\n                            <div class=\"page-title\">\r\n                                <h4>Add Variation Attribute</h4>\r\n                            </div>\r\n                            <button type=\"button\" class=\"close\" data-bs-dismiss=\"modal\" aria-label=\"Close\">\r\n                                <span aria-hidden=\"true\">&times;</span>\r\n                            </button>\r\n                        </div>\r\n                        <div class=\"modal-body custom-modal-body\">\r\n                            <div class=\"row\">\r\n                                <div class=\"col-lg-12\">\r\n                                    <div class=\"input-blocks\">\r\n                                        <label>Attribute Name</label>\r\n                                        <input type=\"text\" class=\"form-control\" />\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"col-lg-12\">\r\n                                    <div class=\"input-blocks\">\r\n                                        <label>Add Value</label>\r\n                                        <input type=\"text\" class=\"form-control\" />\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"row\">\r\n                                <div class=\"col-lg-6\">\r\n\r\n                                </div>\r\n                                <div class=\"col-lg-6\">\r\n                                    <div class=\"modal-footer-btn popup\">\r\n                                        <a href=\"javascript:void(0);\" class=\"btn btn-cancel me-2\"\r\n                                            data-bs-dismiss=\"modal\">Cancel</a>\r\n                                        <a href=\"javascript:void(0);\" class=\"btn btn-submit\"\r\n                                            data-bs-dismiss=\"modal\">Create Attribute</a>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class=\"modal fade\" id=\"add-units-category\">\r\n        <div class=\"modal-dialog modal-dialog-centered custom-modal-two\">\r\n            <div class=\"modal-content\">\r\n                <div class=\"page-wrapper-new p-0\">\r\n                    <div class=\"content\">\r\n                        <div class=\"modal-header border-0 custom-modal-header\">\r\n                            <div class=\"page-title\">\r\n                                <h4>Add New Category</h4>\r\n                            </div>\r\n                            <button type=\"button\" class=\"close\" data-bs-dismiss=\"modal\" aria-label=\"Close\">\r\n                                <span aria-hidden=\"true\">&times;</span>\r\n                            </button>\r\n                        </div>\r\n                        <div class=\"modal-body custom-modal-body\">\r\n                            <div class=\"mb-3\">\r\n                                <label class=\"form-label\">Name</label>\r\n                                <input type=\"text\" class=\"form-control\" />\r\n                            </div>\r\n                            <div class=\"modal-footer-btn\">\r\n                                <a href=\"javascript:void(0);\" class=\"btn btn-cancel me-2\"\r\n                                    data-bs-dismiss=\"modal\">Cancel</a>\r\n                                <a href=\"add-product.html\" class=\"btn btn-submit\">Submit</a>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class=\"modal fade\" id=\"add-units-brand\">\r\n        <div class=\"modal-dialog modal-dialog-centered custom-modal-two\">\r\n            <div class=\"modal-content\">\r\n                <div class=\"page-wrapper-new p-0\">\r\n                    <div class=\"content\">\r\n                        <div class=\"modal-header border-0 custom-modal-header\">\r\n                            <div class=\"page-title\">\r\n                                <h4>Add New Brand</h4>\r\n                            </div>\r\n                            <button type=\"button\" class=\"close\" data-bs-dismiss=\"modal\" aria-label=\"Close\">\r\n                                <span aria-hidden=\"true\">&times;</span>\r\n                            </button>\r\n                        </div>\r\n                        <div class=\"modal-body custom-modal-body\">\r\n                            <div class=\"mb-3\">\r\n                                <label class=\"form-label\">Brand</label>\r\n                                <input type=\"text\" class=\"form-control\" />\r\n                            </div>\r\n                            <div class=\"modal-footer-btn\">\r\n                                <a href=\"javascript:void(0);\" class=\"btn btn-cancel me-2\"\r\n                                    data-bs-dismiss=\"modal\">Cancel</a>\r\n                                <a href=\"add-product.html\" class=\"btn btn-submit\">Submit</a>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class=\"modal fade\" id=\"add-unit\">\r\n        <div class=\"modal-dialog modal-dialog-centered custom-modal-two\">\r\n            <div class=\"modal-content\">\r\n                <div class=\"page-wrapper-new p-0\">\r\n                    <div class=\"content\">\r\n                        <div class=\"modal-header border-0 custom-modal-header\">\r\n                            <div class=\"page-title\">\r\n                                <h4>Add Unit</h4>\r\n                            </div>\r\n                            <button type=\"button\" class=\"close\" data-bs-dismiss=\"modal\" aria-label=\"Close\">\r\n                                <span aria-hidden=\"true\">&times;</span>\r\n                            </button>\r\n                        </div>\r\n                        <div class=\"modal-body custom-modal-body\">\r\n                            <div class=\"mb-3\">\r\n                                <label class=\"form-label\">Unit</label>\r\n                                <input type=\"text\" class=\"form-control\" />\r\n                            </div>\r\n                            <div class=\"modal-footer-btn\">\r\n                                <a href=\"javascript:void(0);\" class=\"btn btn-cancel me-2\"\r\n                                    data-bs-dismiss=\"modal\">Cancel</a>\r\n                                <a href=\"add-product.html\" class=\"btn btn-submit\">Submit</a>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class=\"modal fade\" id=\"add-variation\">\r\n        <div class=\"modal-dialog modal-dialog-centered custom-modal-two\">\r\n            <div class=\"modal-content\">\r\n                <div class=\"page-wrapper-new p-0\">\r\n                    <div class=\"content\">\r\n                        <div class=\"modal-header border-0 custom-modal-header\">\r\n                            <div class=\"page-title\">\r\n                                <h4>Add Variation</h4>\r\n                            </div>\r\n                            <button type=\"button\" class=\"close\" data-bs-dismiss=\"modal\" aria-label=\"Close\">\r\n                                <span aria-hidden=\"true\">&times;</span>\r\n                            </button>\r\n                        </div>\r\n                        <div class=\"modal-body custom-modal-body\">\r\n                            <div class=\"modal-title-head people-cust-avatar\">\r\n                                <h6>Variant Thumbnail</h6>\r\n                            </div>\r\n                            <div class=\"new-employee-field\">\r\n                                <div class=\"profile-pic-upload\">\r\n                                    <div class=\"profile-pic\">\r\n                                        <span><i data-feather=\"plus-circle\" class=\"plus-down-add\"></i>\r\n                                            Add Image</span>\r\n                                    </div>\r\n                                    <div class=\"mb-3\">\r\n                                        <div class=\"image-upload mb-0\">\r\n                                            <input type=\"file\" />\r\n                                            <div class=\"image-uploads\">\r\n                                                <h4>Change Image</h4>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"row\">\r\n                                <div class=\"col-lg-6 pe-0\">\r\n                                    <div class=\"mb-3\">\r\n                                        <label class=\"form-label\">Barcode Symbology</label>\r\n                                        <select class=\"select\">\r\n                                            <option>Choose</option>\r\n                                            <option>Code34</option>\r\n                                        </select>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"col-lg-6 pe-0\">\r\n                                    <div class=\"mb-3\">\r\n                                        <div class=\"input-blocks add-product list\">\r\n                                            <label>Item Code</label>\r\n                                            <input type=\"text\" class=\"form-control list\" value=\"455454478844\" />\r\n                                            <button type=\"submit\" class=\"btn btn-primaryadd\">\r\n                                                Generate Code\r\n                                            </button>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"col-lg-12\">\r\n                                    <div class=\"input-blocks image-upload-down\">\r\n                                        <div class=\"image-upload download\">\r\n                                            <input type=\"file\" />\r\n                                            <div class=\"image-uploads\">\r\n                                                <img src=\"/assets/img/download-img.png\" alt=\"img\" />\r\n                                                <h4>Drag and drop a <span>file to upload</span></h4>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class=\"accordion-body\">\r\n                                        <div class=\"text-editor add-list add\">\r\n                                            <div class=\"col-lg-12\">\r\n                                                <div class=\"add-choosen mb-3\">\r\n                                                    <div class=\"phone-img ms-0\">\r\n                                                        <img src=\"/assets/img/products/phone-add-2.png\" alt=\"image\" />\r\n                                                        <a href=\"javascript:void(0);\"><i data-feather=\"x\"\r\n                                                                class=\"x-square-add remove-product\"></i></a>\r\n                                                    </div>\r\n                                                    <div class=\"phone-img\">\r\n                                                        <img src=\"/assets/img/products/phone-add-1.png\" alt=\"image\" />\r\n                                                        <a href=\"javascript:void(0);\"><i data-feather=\"x\"\r\n                                                                class=\"x-square-add remove-product\"></i></a>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"col-lg-6 pe-0\">\r\n                                    <div class=\"mb-3\">\r\n                                        <label class=\"form-label\">Quantity</label>\r\n                                        <input type=\"text\" class=\"form-control\" />\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"col-lg-6 pe-0\">\r\n                                    <div class=\"mb-3\">\r\n                                        <label class=\"form-label\">Quantity Alert</label>\r\n                                        <input type=\"text\" class=\"form-control\" />\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"col-lg-6 pe-0\">\r\n                                    <div class=\"mb-3\">\r\n                                        <label class=\"form-label\">Tax Type</label>\r\n                                        <select class=\"select\">\r\n                                            <option>Choose</option>\r\n                                            <option>Direct</option>\r\n                                            <option>Indirect</option>\r\n                                        </select>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"col-lg-6 pe-0\">\r\n                                    <div class=\"mb-3\">\r\n                                        <label class=\"form-label\">Tax </label>\r\n                                        <select class=\"select\">\r\n                                            <option>Choose</option>\r\n                                            <option>Income Tax</option>\r\n                                            <option>Service Tax</option>\r\n                                        </select>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"col-lg-12 pe-0\">\r\n                                    <div class=\"mb-3\">\r\n                                        <label class=\"form-label\">Discount Type </label>\r\n                                        <select class=\"select\">\r\n                                            <option>Choose</option>\r\n                                            <option>Percentage</option>\r\n                                            <option>Early Payment</option>\r\n                                        </select>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"col-lg-12 pe-0\">\r\n                                    <div>\r\n                                        <label class=\"form-label\">Discount Value</label>\r\n                                        <input type=\"text\" class=\"form-control\" />\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class=\"modal-footer-btn\">\r\n                                <a href=\"javascript:void(0);\" class=\"btn btn-cancel me-2\"\r\n                                    data-bs-dismiss=\"modal\">Cancel</a>\r\n                                <a href=\"add-product.html\" class=\"btn btn-submit\">Submit</a>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport { ref, onMounted, onBeforeUnmount } from 'vue';\r\n\r\nimport 'select2';\r\nimport feather from 'feather-icons'\r\n\r\nimport Sidebar from '/src/components/Admin/Sidebar.vue';\r\nimport Navbar from '/src/components/Admin/Navbar.vue';\r\n\r\nexport default {\r\n    components: {\r\n        Sidebar,\r\n        Navbar,\r\n    },\r\n    data() {\r\n        return {\r\n            sku: '', // Product SKU\r\n            productName: '', // Product name\r\n            productDescription: '', // Product description\r\n            image: { url: '' }, // Image data\r\n            price: '', // Price\r\n            cost: '', // Cost\r\n            discountType: 'None', // Discount type (None, Percent, Fixed)\r\n            discountValue: '', // Discount value\r\n            unit: 'None', // Unit\r\n            category: 'None', // Category\r\n            subCategory: 'None', // Sub-category\r\n            brand: 'None', // Brand\r\n            manufacturedDate: '', // Manufacturing date\r\n            expiryDate: '', // Expiry date\r\n            variantAttributes: '',\r\n            status: '', // Status\r\n        };\r\n    },\r\n    setup() {\r\n        const select = ref('.select');\r\n        onMounted(async () => {\r\n            try {\r\n                // Initialize the select2 plugin\r\n                await $(select.value).select2();\r\n                // Initialize the feather icons\r\n                await feather.replace();\r\n            } catch (error) {\r\n                console.log(error);\r\n            }\r\n\r\n        });\r\n        onBeforeUnmount(() => {\r\n            // Destroy the select2 plugin to avoid memory leaks when component is unmounted\r\n            $(select.value).select2('destroy');\r\n        });\r\n        return {\r\n            select\r\n        };\r\n    },\r\n    methods: {\r\n\r\n        filterTextInput(value) {\r\n            return value.replace(/[^a-zA-Z0-9.\\-() ]/g, '');\r\n        },\r\n        // Allow only numbers and dots\r\n        filterNumInput(value) {\r\n            return value.replace(/[^0-9.]/g, '');\r\n        },\r\n        generateEAN13() {\r\n            let digits = '';\r\n            for (let i = 0; i < 12; i++) {\r\n                digits += Math.floor(Math.random() * 10).toString();\r\n            }\r\n            let sumOdd = 0;\r\n            let sumEven = 0;\r\n            for (let i = 0; i < 12; i++) {\r\n                const digit = parseInt(digits[i], 10);\r\n                if (i % 2 === 0) {\r\n                    sumOdd += digit;\r\n                } else {\r\n                    sumEven += digit;\r\n                }\r\n            }\r\n            const totalSum = sumOdd + (sumEven * 3);\r\n            const checksum = (10 - (totalSum % 10)) % 10;\r\n\r\n            // Return the complete EAN-13 code\r\n            return digits + checksum;\r\n        },\r\n        autoGenerateSKU() {\r\n            this.sku = this.generateEAN13(); // Set sku to generated EAN-13\r\n        },\r\n        checkSubmit(event) {\r\n            if (!this.canSubmit) {\r\n                event.preventDefault();\r\n            } else {\r\n                console.log('Form submitted');\r\n            }\r\n        },\r\n        onFileChange(event) {\r\n            const file = event.target.files[0];\r\n            if (file) {\r\n                // Create a URL for the uploaded file\r\n                this.image = {\r\n                    file: file,\r\n                    url: URL.createObjectURL(file),\r\n                };\r\n                // Re-render Feather icons after the image URL is set\r\n                this.$nextTick(() => {\r\n                    window.feather.replace();\r\n                });\r\n            }\r\n        },\r\n        // Removes the uploaded image and resets the image data\r\n        removeImage() {\r\n            this.image = { file: null, url: null };\r\n        },\r\n\r\n        async addProduct() {\r\n            try {\r\n                // Prepare the form data\r\n                const formData = new FormData();\r\n                formData.append('sku', this.sku);\r\n                formData.append('productName', this.productName);\r\n                formData.append('productDescription', this.productDescription);\r\n                formData.append('price', this.price);\r\n                formData.append('cost', this.cost);\r\n                formData.append('discountType', this.discountType);\r\n                formData.append('discountValue', this.discountValue);\r\n                formData.append('unit', this.unit);\r\n                formData.append('category', this.category);\r\n                formData.append('subCategory', this.subCategory);\r\n                formData.append('brand', this.brand);\r\n                formData.append('manufacturedDate', this.manufacturedDate);\r\n                formData.append('expiryDate', this.expiryDate);\r\n   \r\n                formData.append('variantAttributes', JSON.stringify(this.variantAttributes));\r\n                formData.append('status', this.status); append('status', this.status);\r\n\r\n                // Attach the image if available\r\n                if (this.image.file) {\r\n                    formData.append('image', this.image.file);\r\n                }\r\n\r\n                // Send the request to add the product\r\n                const response = await axios.post('http://localhost:5000/api/add_products', formData, {\r\n                    headers: {\r\n                        'Content-Type': 'multipart/form-data'\r\n                    }\r\n                });\r\n\r\n                // Handle the response (success feedback or redirect)\r\n                if (response.data.success === true) {\r\n                    alert('Product added successfully!');\r\n                } else if (response.data.success === false) {\r\n                    alert(`Failed to add product: ${response.data.message}`);\r\n                } else {\r\n                    alert('Unexpected response status.');\r\n                }\r\n            } catch (error) {\r\n                console.error('Error adding product:', error);\r\n                alert('An error occurred. Please try again.');\r\n            }\r\n\r\n        },\r\n        watch: {\r\n            checkLength(value, length) {\r\n                if (value.length != length) {\r\n\r\n                }\r\n            }\r\n        },\r\n        mouted() {\r\n            feather.replace();\r\n        }\r\n    }\r\n}\r\n</script>\r\n<style scoped>\r\n.is-invalid {\r\n    border-color: red;\r\n}\r\n\r\n.text-danger {\r\n    color: red;\r\n}\r\n\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}