{"ast":null,"code":"import { ref, onMounted, nextTick } from 'vue';\nimport Navbar from '/src/components/Admin/Navbar.vue';\nimport ClipLoader from 'vue-spinner/src/ClipLoader.vue';\nimport axios from 'axios';\nimport feather from 'feather-icons';\nimport $ from 'jQuery';\nexport default {\n  components: {\n    Navbar,\n    ClipLoader\n  },\n  setup() {\n    const apiURL = process.env.VUE_APP_URL;\n    const users = ref([]);\n    const loading = ref(false);\n    const tableInitialized = ref(false);\n    const initializeDataTable = () => {\n      const tableElement = $('#user-table');\n      if ($.fn.DataTable.isDataTable(tableElement)) {\n        tableElement.DataTable().destroy();\n      }\n      tableElement.DataTable({\n        searching: true,\n        paging: true,\n        info: true,\n        responsive: true\n      });\n    };\n    const getUsers = async () => {\n      try {\n        loading.value = true;\n        const response = await axios.get(`${apiURL}/get_all_users`);\n        users.value = response.data.users;\n        nextTick(() => {\n          if (!tableInitialized.value) {\n            initializeDataTable();\n            tableInitialized.value = true;\n          } else {\n            $('#user-table').DataTable().clear().rows.add(users.value).draw();\n          }\n        });\n      } catch (error) {\n        console.error('Error fetching users:', error.message);\n      } finally {\n        loading.value = false;\n      }\n    };\n    const addUser = async () => {\n      // Add user logic\n      await getUsers(); // Refresh data\n    };\n    onMounted(async () => {\n      await getUsers();\n      feather.replace();\n    });\n    return {\n      users,\n      loading,\n      addUser\n    };\n  }\n};","map":{"version":3,"names":["ref","onMounted","nextTick","Navbar","ClipLoader","axios","feather","$","components","setup","apiURL","process","env","VUE_APP_URL","users","loading","tableInitialized","initializeDataTable","tableElement","fn","DataTable","isDataTable","destroy","searching","paging","info","responsive","getUsers","value","response","get","data","clear","rows","add","draw","error","console","message","addUser","replace"],"sources":["C:\\Users\\Administrator\\OneDrive\\Desktop\\POSExpress\\frontend\\src\\components\\Admin\\Users\\Staffs.vue"],"sourcesContent":["<template>\r\n  <Navbar />\r\n  <Sidebar />\r\n  <div class=\"page-wrapper\">\r\n    <div class=\"content\">\r\n      <div class=\"page-header\">\r\n        <div class=\"add-item d-flex\">\r\n          <div class=\"page-title\">\r\n            <h4>User List</h4>\r\n            <h6>Manage Your Users</h6>\r\n          </div>\r\n        </div>\r\n        <div class=\"page-btn\">\r\n          <a href=\"#\" class=\"btn btn-added\" data-bs-toggle=\"modal\" data-bs-target=\"#add-users\">\r\n            <i data-feather=\"plus-circle\" class=\"me-2\"></i>Add New User\r\n          </a>\r\n        </div>\r\n      </div>\r\n      <div class=\"card table-list-card\">\r\n        <div class=\"card-body\">\r\n          <div class=\"table-responsive\">\r\n            <ClipLoader v-if=\"loading\" />\r\n            <table v-else class=\"table\" id=\"user-table\">\r\n              <thead>\r\n                <tr>\r\n                  <th>User Full Name</th>\r\n                  <th>Phone</th>\r\n                  <th>Email</th>\r\n                  <th>Status</th>\r\n                  <th>Login-Time</th>\r\n                  <th>Logout-Time</th>\r\n                  <th>Role</th>\r\n                  <th>Created On</th>\r\n                  <th class=\"no-sort\">Action</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                <tr v-for=\"user in users\" :key=\"user._id\">\r\n                  <td>{{ user.firstName }} {{ user.lastName }}</td>\r\n                  <td>{{ user.phone }}</td>\r\n                  <td>{{ user.email }}</td>\r\n                  <td>\r\n                    <span :class=\"{\r\n                      'badge': true,\r\n                      'badge-linesuccess': user.status === 'Online',\r\n                      'badge-linewarning': user.status === 'Offline'\r\n                    }\">\r\n                      {{ user.status }}\r\n                    </span>\r\n                  </td>\r\n                  <td>{{ new Date(user.login).toLocaleString() }}</td>\r\n                  <td>{{ new Date(user.logout).toLocaleString() }}</td>\r\n                  <td>{{ user.role }}</td>\r\n                  <td>{{ new Date(user.createdAt).toLocaleString() }}</td>\r\n                  <td class=\"action-table-data\">\r\n                    <div class=\"edit-delete-action\">\r\n                      <a class=\"me-2 p-2\" href=\"#\" data-bs-toggle=\"modal\" data-bs-target=\"#edit-user\" @click=\"openEditModal(user._id)\">\r\n                        <i data-feather=\"edit\" class=\"feather-edit\"></i>\r\n                      </a>\r\n                      <a class=\"confirm-text p-2\" href=\"javascript:void(0);\" @click=\"deleteUser(user._id)\">\r\n                        <i data-feather=\"trash-2\" class=\"feather-trash-2\"></i>\r\n                      </a>\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n\r\n  <!-- Add User Modal -->\r\n  <div class=\"modal fade\" id=\"add-users\">\r\n    <div class=\"modal-dialog modal-dialog-centered custom-modal-two\">\r\n      <div class=\"modal-content\">\r\n        <div class=\"page-wrapper-new p-0\">\r\n          <div class=\"content\">\r\n            <div class=\"modal-header border-0 custom-modal-header\">\r\n              <div class=\"page-title\">\r\n                <h4>Add User</h4>\r\n              </div>\r\n              <button type=\"button\" class=\"close\" data-bs-dismiss=\"modal\" aria-label=\"Close\">\r\n                <span aria-hidden=\"true\">&times;</span>\r\n              </button>\r\n            </div>\r\n            <div class=\"modal-body custom-modal-body new-employee-field\">\r\n              <form @submit.prevent=\"addUser\">\r\n                <!-- Form Fields -->\r\n                <div class=\"modal-footer-btn\">\r\n                  <button type=\"button\" class=\"btn btn-cancel me-2\" data-bs-dismiss=\"modal\">\r\n                    Cancel\r\n                  </button>\r\n                  <button type=\"submit\" class=\"btn btn-submit\">Submit</button>\r\n                </div>\r\n              </form>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, onMounted, nextTick } from 'vue';\r\nimport Navbar from '/src/components/Admin/Navbar.vue';\r\nimport ClipLoader from 'vue-spinner/src/ClipLoader.vue';\r\nimport axios from 'axios';\r\nimport feather from 'feather-icons';\r\nimport $ from 'jQuery';\r\n\r\nexport default {\r\n  components: {\r\n    Navbar,\r\n    ClipLoader\r\n  },\r\n  setup() {\r\n    const apiURL = process.env.VUE_APP_URL;\r\n    const users = ref([]);\r\n    const loading = ref(false);\r\n    const tableInitialized = ref(false);\r\n\r\n    const initializeDataTable = () => {\r\n      const tableElement = $('#user-table');\r\n      if ($.fn.DataTable.isDataTable(tableElement)) {\r\n        tableElement.DataTable().destroy();\r\n      }\r\n      tableElement.DataTable({\r\n        searching: true,\r\n        paging: true,\r\n        info: true,\r\n        responsive: true,\r\n      });\r\n    };\r\n\r\n    const getUsers = async () => {\r\n      try {\r\n        loading.value = true;\r\n        const response = await axios.get(`${apiURL}/get_all_users`);\r\n        users.value = response.data.users;\r\n\r\n        nextTick(() => {\r\n          if (!tableInitialized.value) {\r\n            initializeDataTable();\r\n            tableInitialized.value = true;\r\n          } else {\r\n            $('#user-table').DataTable().clear().rows.add(users.value).draw();\r\n          }\r\n        });\r\n      } catch (error) {\r\n        console.error('Error fetching users:', error.message);\r\n      } finally {\r\n        loading.value = false;\r\n      }\r\n    };\r\n\r\n    const addUser = async () => {\r\n      // Add user logic\r\n      await getUsers(); // Refresh data\r\n    };\r\n\r\n    onMounted(async () => {\r\n      await getUsers();\r\n      feather.replace();\r\n    });\r\n\r\n    return {\r\n      users,\r\n      loading,\r\n      addUser\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.profile-pic-upload {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.profile-pic.brand-pic {\r\n  width: 120px;\r\n  /* Set width for the add image button */\r\n  height: 120px;\r\n  /* Set height to match the image preview */\r\n  background-color: #f1f1f1;\r\n  /* Optional: Add background color */\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  cursor: pointer;\r\n  border-radius: 8px;\r\n  border: 1px solid #ddd;\r\n  /* Optional: Add border */\r\n}\r\n\r\n.image-preview-wrapper {\r\n  position: relative;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  width: 120px;\r\n  /* Same width as the add image button */\r\n  height: 120px;\r\n  /* Same height as the add image button */\r\n}\r\n\r\n.image-preview {\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: cover;\r\n  /* Ensure the image covers the area while maintaining its aspect ratio */\r\n  border-radius: 8px;\r\n  /* Optional: Add border radius */\r\n}\r\n\r\n.remove-image-btn {\r\n  position: absolute;\r\n  top: 5px;\r\n  right: 5px;\r\n  background-color: rgb(228, 0, 0);\r\n  /* Optional: Dark background for the close button */\r\n  padding: 1px;\r\n\r\n  z-index: 10;\r\n}\r\n</style>"],"mappings":"AA0GA,SAASA,GAAG,EAAEC,SAAS,EAAEC,QAAO,QAAS,KAAK;AAC9C,OAAOC,MAAK,MAAO,kCAAkC;AACrD,OAAOC,UAAS,MAAO,gCAAgC;AACvD,OAAOC,KAAI,MAAO,OAAO;AACzB,OAAOC,OAAM,MAAO,eAAe;AACnC,OAAOC,CAAA,MAAO,QAAQ;AAEtB,eAAe;EACbC,UAAU,EAAE;IACVL,MAAM;IACNC;EACF,CAAC;EACDK,KAAKA,CAAA,EAAG;IACN,MAAMC,MAAK,GAAIC,OAAO,CAACC,GAAG,CAACC,WAAW;IACtC,MAAMC,KAAI,GAAId,GAAG,CAAC,EAAE,CAAC;IACrB,MAAMe,OAAM,GAAIf,GAAG,CAAC,KAAK,CAAC;IAC1B,MAAMgB,gBAAe,GAAIhB,GAAG,CAAC,KAAK,CAAC;IAEnC,MAAMiB,mBAAkB,GAAIA,CAAA,KAAM;MAChC,MAAMC,YAAW,GAAIX,CAAC,CAAC,aAAa,CAAC;MACrC,IAAIA,CAAC,CAACY,EAAE,CAACC,SAAS,CAACC,WAAW,CAACH,YAAY,CAAC,EAAE;QAC5CA,YAAY,CAACE,SAAS,CAAC,CAAC,CAACE,OAAO,CAAC,CAAC;MACpC;MACAJ,YAAY,CAACE,SAAS,CAAC;QACrBG,SAAS,EAAE,IAAI;QACfC,MAAM,EAAE,IAAI;QACZC,IAAI,EAAE,IAAI;QACVC,UAAU,EAAE;MACd,CAAC,CAAC;IACJ,CAAC;IAED,MAAMC,QAAO,GAAI,MAAAA,CAAA,KAAY;MAC3B,IAAI;QACFZ,OAAO,CAACa,KAAI,GAAI,IAAI;QACpB,MAAMC,QAAO,GAAI,MAAMxB,KAAK,CAACyB,GAAG,CAAC,GAAGpB,MAAM,gBAAgB,CAAC;QAC3DI,KAAK,CAACc,KAAI,GAAIC,QAAQ,CAACE,IAAI,CAACjB,KAAK;QAEjCZ,QAAQ,CAAC,MAAM;UACb,IAAI,CAACc,gBAAgB,CAACY,KAAK,EAAE;YAC3BX,mBAAmB,CAAC,CAAC;YACrBD,gBAAgB,CAACY,KAAI,GAAI,IAAI;UAC/B,OAAO;YACLrB,CAAC,CAAC,aAAa,CAAC,CAACa,SAAS,CAAC,CAAC,CAACY,KAAK,CAAC,CAAC,CAACC,IAAI,CAACC,GAAG,CAACpB,KAAK,CAACc,KAAK,CAAC,CAACO,IAAI,CAAC,CAAC;UACnE;QACF,CAAC,CAAC;MACJ,EAAE,OAAOC,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAACE,OAAO,CAAC;MACvD,UAAU;QACRvB,OAAO,CAACa,KAAI,GAAI,KAAK;MACvB;IACF,CAAC;IAED,MAAMW,OAAM,GAAI,MAAAA,CAAA,KAAY;MAC1B;MACA,MAAMZ,QAAQ,CAAC,CAAC,EAAE;IACpB,CAAC;IAED1B,SAAS,CAAC,YAAY;MACpB,MAAM0B,QAAQ,CAAC,CAAC;MAChBrB,OAAO,CAACkC,OAAO,CAAC,CAAC;IACnB,CAAC,CAAC;IAEF,OAAO;MACL1B,KAAK;MACLC,OAAO;MACPwB;IACF,CAAC;EACH;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}