{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, createStaticVNode as _createStaticVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"page-wrapper\"\n};\nconst _hoisted_2 = {\n  class: \"content\"\n};\nconst _hoisted_3 = {\n  class: \"row\"\n};\nconst _hoisted_4 = {\n  class: \"col-xl-7 col-sm-12 col-12 d-flex\"\n};\nconst _hoisted_5 = {\n  class: \"card flex-fill\"\n};\nconst _hoisted_6 = {\n  class: \"card-body\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_Navbar = _resolveComponent(\"Navbar\");\n  const _component_LineChart = _resolveComponent(\"LineChart\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createVNode(_component_Navbar), _createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createCommentVNode(\" Dashboard Widgets and other sections \"), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, [_cache[0] || (_cache[0] = _createStaticVNode(\"<div class=\\\"card-header d-flex justify-content-between align-items-center\\\" data-v-485b31ae><h5 class=\\\"card-title mb-0\\\" data-v-485b31ae>Sales</h5><div class=\\\"graph-sets\\\" data-v-485b31ae><ul class=\\\"mb-0\\\" data-v-485b31ae><li data-v-485b31ae><span data-v-485b31ae>Sales</span></li><li data-v-485b31ae><span data-v-485b31ae>Purchase</span></li></ul><div class=\\\"dropdown dropdown-wraper\\\" data-v-485b31ae><button class=\\\"btn btn-light btn-sm dropdown-toggle\\\" type=\\\"button\\\" id=\\\"dropdownMenuButton\\\" data-bs-toggle=\\\"dropdown\\\" aria-expanded=\\\"false\\\" data-v-485b31ae> 2023 </button><ul class=\\\"dropdown-menu\\\" aria-labelledby=\\\"dropdownMenuButton\\\" data-v-485b31ae><li data-v-485b31ae><a href=\\\"javascript:void(0);\\\" class=\\\"dropdown-item\\\" data-v-485b31ae>2023</a></li><li data-v-485b31ae><a href=\\\"javascript:void(0);\\\" class=\\\"dropdown-item\\\" data-v-485b31ae>2022</a></li><li data-v-485b31ae><a href=\\\"javascript:void(0);\\\" class=\\\"dropdown-item\\\" data-v-485b31ae>2021</a></li></ul></div></div></div>\", 1)), _createElementVNode(\"div\", _hoisted_6, [_createCommentVNode(\" LineChart component to display the sales chart \"), _createVNode(_component_LineChart, {\n    chartData: _ctx.chartData\n  }, null, 8 /* PROPS */, [\"chartData\"])])])]), _createCommentVNode(\" Other content like Recent Products, Expired Products, etc. \")])])])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["class","_createElementBlock","_Fragment","_createVNode","_component_Navbar","_createElementVNode","_hoisted_1","_hoisted_2","_createCommentVNode","_hoisted_3","_hoisted_4","_hoisted_5","_createStaticVNode","_hoisted_6","_component_LineChart","chartData","_ctx"],"sources":["C:\\Users\\Administrator\\OneDrive\\Desktop\\POSExpress\\frontend\\src\\components\\Admin\\Main\\Dashboard.vue"],"sourcesContent":["<template>\r\n  <Navbar/>\r\n  <div class=\"page-wrapper\">\r\n    <div class=\"content\">\r\n      <!-- Dashboard Widgets and other sections -->\r\n      \r\n      <div class=\"row\">\r\n        <div class=\"col-xl-7 col-sm-12 col-12 d-flex\">\r\n          <div class=\"card flex-fill\">\r\n            <div class=\"card-header d-flex justify-content-between align-items-center\">\r\n              <h5 class=\"card-title mb-0\">Sales</h5>\r\n              <div class=\"graph-sets\">\r\n                <ul class=\"mb-0\">\r\n                  <li><span>Sales</span></li>\r\n                  <li><span>Purchase</span></li>\r\n                </ul>\r\n                <div class=\"dropdown dropdown-wraper\">\r\n                  <button class=\"btn btn-light btn-sm dropdown-toggle\" type=\"button\" id=\"dropdownMenuButton\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">\r\n                    2023\r\n                  </button>\r\n                  <ul class=\"dropdown-menu\" aria-labelledby=\"dropdownMenuButton\">\r\n                    <li><a href=\"javascript:void(0);\" class=\"dropdown-item\">2023</a></li>\r\n                    <li><a href=\"javascript:void(0);\" class=\"dropdown-item\">2022</a></li>\r\n                    <li><a href=\"javascript:void(0);\" class=\"dropdown-item\">2021</a></li>\r\n                  </ul>\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"card-body\">\r\n              <!-- LineChart component to display the sales chart -->\r\n              <LineChart :chartData=\"chartData\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n        \r\n        <!-- Other content like Recent Products, Expired Products, etc. -->\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { ref, onMounted, onBeforeUnmount, defineComponent, computed } from 'vue';\r\nimport { Line } from \"vue-chartjs\"; \r\nimport { Chart as ChartJS, Title, Tooltip, Legend, LineElement, CategoryScale, LinearScale } from \"chart.js\"; \r\nimport 'select2'; \r\nimport feather from 'feather-icons';\r\nimport 'datatables.net-bs5';\r\nimport 'datatables.net-bs5/css/dataTables.bootstrap5.min.css';\r\nimport Navbar from '/src/components/Admin/Navbar.vue';\r\nimport axios from \"axios\";\r\n\r\n// Register chart.js components\r\nChartJS.register(Title, Tooltip, Legend, LineElement, CategoryScale, LinearScale);\r\n\r\nexport default defineComponent({\r\n  components: {\r\n    Navbar,\r\n    LineChart: Line, // Register the Line chart component\r\n  },\r\n  setup() {\r\n    const select = ref('.select');\r\n    const salesData = ref([]);\r\n    \r\n    // Make sure chartData has a fallback in case salesData is empty\r\n    const chartData = computed(() => {\r\n      if (!salesData.value.length) {\r\n        return { labels: [], datasets: [] }; // Return an empty chart if no sales data\r\n      }\r\n\r\n      const dates = salesData.value.map((data) => data._id);\r\n      const totalSales = salesData.value.map((data) => data.totalSales);\r\n      const totalProfit = salesData.value.map((data) => data.totalProfit);\r\n\r\n      return {\r\n        labels: dates,\r\n        datasets: [\r\n          {\r\n            label: \"Total Sales\",\r\n            data: totalSales,\r\n            borderColor: \"rgb(75, 192, 192)\",\r\n            fill: false,\r\n            tension: 0.1,\r\n          },\r\n          {\r\n            label: \"Total Profit\",\r\n            data: totalProfit,\r\n            borderColor: \"rgb(255, 99, 132)\",\r\n            fill: false,\r\n            tension: 0.1,\r\n          },\r\n        ],\r\n      };\r\n    });\r\n\r\n    // Fetch the sales data\r\n    onMounted(async () => {\r\n      try {\r\n        // Initialize select2 and DataTables\r\n        await $(select.value).select2();\r\n        await feather.replace();\r\n        await $('.table').DataTable();\r\n\r\n        // Fetch sales data from the API\r\n        const response = await axios.get(\"http://localhost:5000/api/get_sales\"); // Adjust the URL to match your API endpoint\r\n        if (response.data.success) {\r\n          salesData.value = response.data.salesDatas;\r\n        } else {\r\n          console.error(\"Failed to fetch sales data\");\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error fetching sales data:\", error);\r\n      }\r\n    });\r\n\r\n    onBeforeUnmount(() => {\r\n      $(select.value).select2('destroy');\r\n    });\r\n\r\n    return {\r\n      select,\r\n      salesData,\r\n      chartData, // Return chart data\r\n    };\r\n  },\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n/* Optional: Add some styling */\r\n#salesChart {\r\n  max-width: 800px;\r\n  margin: 0 auto;\r\n  height: 400px;\r\n}\r\n</style>"],"mappings":";;EAEOA,KAAK,EAAC;AAAc;;EAClBA,KAAK,EAAC;AAAS;;EAGbA,KAAK,EAAC;AAAK;;EACTA,KAAK,EAAC;AAAkC;;EACtCA,KAAK,EAAC;AAAgB;;EAoBpBA,KAAK,EAAC;AAAW;;;;uBA5BlCC,mBAAA,CAAAC,SAAA,SACEC,YAAA,CAASC,iBAAA,GACTC,mBAAA,CAoCM,OApCNC,UAoCM,GAnCJD,mBAAA,CAkCM,OAlCNE,UAkCM,GAjCJC,mBAAA,0CAA6C,EAE7CH,mBAAA,CA8BM,OA9BNI,UA8BM,GA7BJJ,mBAAA,CA0BM,OA1BNK,UA0BM,GAzBJL,mBAAA,CAwBM,OAxBNM,UAwBM,G,0BAhChBC,kBAAA,2/BA4BYP,mBAAA,CAGM,OAHNQ,UAGM,GAFJL,mBAAA,oDAAuD,EACvDL,YAAA,CAAoCW,oBAAA;IAAxBC,SAAS,EAAEC,IAAA,CAAAD;EAAS,uC,OAKtCP,mBAAA,gEAAmE,C","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}