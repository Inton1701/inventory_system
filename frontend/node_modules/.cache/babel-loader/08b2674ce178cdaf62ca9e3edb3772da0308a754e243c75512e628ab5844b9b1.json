{"ast":null,"code":"import \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\nimport JsBarcode from 'jsbarcode';\nimport { onMounted, watch, ref, nextTick } from 'vue';\nexport default {\n  props: {\n    sku: {\n      type: String,\n      default: ''\n    },\n    productName: {\n      type: String,\n      default: 'Product Name'\n    },\n    format: {\n      type: String,\n      default: 'EAN13'\n    },\n    lineColor: {\n      type: String,\n      default: '#000000'\n    },\n    width: {\n      type: Number,\n      default: 4\n    },\n    height: {\n      type: Number,\n      default: 100\n    }\n  },\n  setup(props) {\n    const svgRef = ref(null);\n    const errorMessage = ref('');\n    const showProductName = ref(true);\n    const generateBarcode = async sku => {\n      try {\n        if (!sku || typeof sku !== 'string') {\n          throw new Error('Invalid SKU: Must be a string.');\n        }\n\n        // Validate based on barcode format (e.g., EAN13 requires 13 digits)\n        if (props.format === 'EAN13' && !/^\\d{13}$/.test(sku)) {\n          throw new Error('Invalid EAN13 SKU: Must be 13 numeric digits.');\n        }\n        errorMessage.value = '';\n        await nextTick();\n\n        // Generate barcode directly from the user input\n        JsBarcode(svgRef.value, sku, {\n          format: props.format,\n          lineColor: props.lineColor,\n          width: props.width,\n          height: props.height,\n          displayValue: true\n        });\n      } catch (error) {\n        console.error(error.message);\n        errorMessage.value = error.message;\n\n        // Display fallback barcode if input is invalid\n        JsBarcode(svgRef.value, '0000000000000', {\n          format: 'CODE128',\n          lineColor: props.lineColor,\n          width: props.width,\n          height: props.height,\n          displayValue: true\n        });\n      }\n    };\n    const downloadBarcode = () => {\n      const svg = svgRef.value;\n      const canvas = document.createElement('canvas');\n      const ctx = canvas.getContext('2d');\n      const svgData = new XMLSerializer().serializeToString(svg);\n      const img = new Image();\n      const svgBlob = new Blob([svgData], {\n        type: 'image/svg+xml;charset=utf-8'\n      });\n      const url = URL.createObjectURL(svgBlob);\n      img.onload = () => {\n        canvas.width = img.width;\n        canvas.height = img.height + (showProductName.value ? 30 : 0);\n        ctx.fillStyle = 'white';\n        ctx.fillRect(0, 0, canvas.width, canvas.height);\n        ctx.drawImage(img, 0, 0);\n        if (showProductName.value) {\n          ctx.font = '14px sans-serif';\n          ctx.fillStyle = 'black';\n          ctx.textAlign = 'center';\n          ctx.fillText(props.productName, canvas.width / 2, img.height + 20);\n        }\n        const pngUrl = canvas.toDataURL('image/png');\n        const link = document.createElement('a');\n        link.href = pngUrl;\n        link.download = `${props.productName}_barcode.png`;\n        document.body.appendChild(link);\n        link.click();\n        document.body.removeChild(link);\n        URL.revokeObjectURL(url);\n      };\n      img.src = url;\n    };\n    onMounted(() => generateBarcode(props.sku));\n    watch(() => props.sku, newSku => {\n      generateBarcode(newSku);\n    });\n    return {\n      svgRef,\n      errorMessage,\n      downloadBarcode,\n      showProductName\n    };\n  }\n};","map":{"version":3,"names":["JsBarcode","onMounted","watch","ref","nextTick","props","sku","type","String","default","productName","format","lineColor","width","Number","height","setup","svgRef","errorMessage","showProductName","generateBarcode","Error","test","value","displayValue","error","console","message","downloadBarcode","svg","canvas","document","createElement","ctx","getContext","svgData","XMLSerializer","serializeToString","img","Image","svgBlob","Blob","url","URL","createObjectURL","onload","fillStyle","fillRect","drawImage","font","textAlign","fillText","pngUrl","toDataURL","link","href","download","body","appendChild","click","removeChild","revokeObjectURL","src","newSku"],"sources":["C:\\Users\\Administrator\\OneDrive\\Desktop\\POSExpress\\frontend\\src\\components\\Admin\\Inventory\\Barcode.vue"],"sourcesContent":["<script>\r\nimport JsBarcode from 'jsbarcode';\r\nimport { onMounted, watch, ref, nextTick } from 'vue';\r\n\r\nexport default {\r\n  props: {\r\n    sku: {\r\n      type: String,\r\n      default: ''\r\n    },\r\n    productName: {\r\n      type: String,\r\n      default: 'Product Name'\r\n    },\r\n    format: {\r\n      type: String,\r\n      default: 'EAN13'\r\n    },\r\n    lineColor: {\r\n      type: String,\r\n      default: '#000000'\r\n    },\r\n    width: {\r\n      type: Number,\r\n      default: 4\r\n    },\r\n    height: {\r\n      type: Number,\r\n      default: 100\r\n    }\r\n  },\r\n  setup(props) {\r\n    const svgRef = ref(null);\r\n    const errorMessage = ref('');\r\n    const showProductName = ref(true);\r\n\r\n    const generateBarcode = async (sku) => {\r\n      try {\r\n        if (!sku || typeof sku !== 'string') {\r\n          throw new Error('Invalid SKU: Must be a string.');\r\n        }\r\n\r\n        // Validate based on barcode format (e.g., EAN13 requires 13 digits)\r\n        if (props.format === 'EAN13' && (!/^\\d{13}$/.test(sku))) {\r\n          throw new Error('Invalid EAN13 SKU: Must be 13 numeric digits.');\r\n        }\r\n\r\n        errorMessage.value = '';\r\n        await nextTick();\r\n\r\n        // Generate barcode directly from the user input\r\n        JsBarcode(svgRef.value, sku, {\r\n          format: props.format,\r\n          lineColor: props.lineColor,\r\n          width: props.width,\r\n          height: props.height,\r\n          displayValue: true\r\n        });\r\n      } catch (error) {\r\n        console.error(error.message);\r\n        errorMessage.value = error.message;\r\n\r\n        // Display fallback barcode if input is invalid\r\n        JsBarcode(svgRef.value, '0000000000000', {\r\n          format: 'CODE128',\r\n          lineColor: props.lineColor,\r\n          width: props.width,\r\n          height: props.height,\r\n          displayValue: true\r\n        });\r\n      }\r\n    };\r\n\r\n    const downloadBarcode = () => {\r\n      const svg = svgRef.value;\r\n      const canvas = document.createElement('canvas');\r\n      const ctx = canvas.getContext('2d');\r\n      const svgData = new XMLSerializer().serializeToString(svg);\r\n      const img = new Image();\r\n      const svgBlob = new Blob([svgData], { type: 'image/svg+xml;charset=utf-8' });\r\n      const url = URL.createObjectURL(svgBlob);\r\n\r\n      img.onload = () => {\r\n        canvas.width = img.width;\r\n        canvas.height = img.height + (showProductName.value ? 30 : 0);\r\n        ctx.fillStyle = 'white';\r\n        ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n\r\n        ctx.drawImage(img, 0, 0);\r\n\r\n        if (showProductName.value) {\r\n          ctx.font = '14px sans-serif';\r\n          ctx.fillStyle = 'black';\r\n          ctx.textAlign = 'center';\r\n          ctx.fillText(props.productName, canvas.width / 2, img.height + 20);\r\n        }\r\n\r\n        const pngUrl = canvas.toDataURL('image/png');\r\n        const link = document.createElement('a');\r\n        link.href = pngUrl;\r\n        link.download = `${props.productName}_barcode.png`;\r\n        document.body.appendChild(link);\r\n        link.click();\r\n        document.body.removeChild(link);\r\n        URL.revokeObjectURL(url);\r\n      };\r\n      img.src = url;\r\n    };\r\n\r\n    onMounted(() => generateBarcode(props.sku));\r\n    watch(\r\n      () => props.sku,\r\n      (newSku) => {\r\n        generateBarcode(newSku);\r\n      }\r\n    );\r\n\r\n    return {\r\n      svgRef,\r\n      errorMessage,\r\n      downloadBarcode,\r\n      showProductName\r\n    };\r\n  }\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div class=\"row px-5\">\r\n    <div class=\"row\">\r\n      <div v-if=\"errorMessage\" class=\"error-message\">{{ errorMessage }}</div>\r\n      <svg ref=\"svgRef\"></svg>\r\n      <div v-if=\"showProductName\" class=\"product-name text-center\">{{ productName }}</div>\r\n    </div>\r\n    <div class=\"row ps-4 pe-3\">\r\n      <button class=\"btn btn-primary fs-6\" @click=\"downloadBarcode\">\r\n        <span>Download </span>\r\n        <font-awesome-icon icon=\"download\" style=\"color: #ffffff;\" />\r\n      </button>\r\n    </div>\r\n    <!-- Toggle for controlling visibility of the product name -->\r\n    <div class=\"row\">\r\n      <label class=\"show-name-label\">\r\n  <input type=\"checkbox\" v-model=\"showProductName\" />\r\n  <span class=\"text-secondary\">Show Product Name</span>\r\n</label>\r\n   \r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style scoped>\r\n.error-message {\r\n  color: red;\r\n  font-weight: bold;\r\n  margin-top: 10px;\r\n}\r\n\r\n.product-name {\r\n  display: flex;\r\n  font\r\n  justify-content: center;\r\n  align-items: center;\r\n  text-align: center;\r\n  font-size: 16px;\r\n  margin-top: 5px;\r\n  margin-left: auto;\r\n  margin-right: auto;\r\n  color: black;\r\n  font-weight: bold;\r\n  word-break: break-word;\r\n  max-width: 80%;\r\n}\r\n.show-name-label {\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.show-name-label input {\r\n  margin-right: 8px;\r\n}\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}